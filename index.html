<!DOCTYPE html>
<html lang="hi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>à¤•à¥‰à¤² à¤•à¤¾à¤‰à¤‚à¤Ÿà¤¡à¤¾à¤‰ãƒ³ - Call Countdown Timer</title>
    
    <!-- SEO ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ -->
    <meta name="description" content="ç¾ã—ã„ã‚¤ãƒ³ãƒ‰é¢¨ãƒ‡ã‚¶ã‚¤ãƒ³ã®ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼ã€‚50ä»¥ä¸Šã®è¨€èªã«å¯¾å¿œã—ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç‰¹å®šã®æ—¥æ™‚ã¾ã§ã®æ™‚é–“ã‚’è¡¨ç¤ºã€‚ãƒ’ãƒ³ãƒ‡ã‚£ãƒ¼èªã€æ—¥æœ¬èªã€è‹±èªãªã©å¤šè¨€èªã‚µãƒãƒ¼ãƒˆã€‚" />
    <meta name="keywords" content="countdown timer, ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³, ã‚¿ã‚¤ãƒãƒ¼, å¤šè¨€èª, ã‚¤ãƒ³ãƒ‰, ãƒ’ãƒ³ãƒ‡ã‚£ãƒ¼èª, æ—¥æœ¬èª, countdown, timer, multilingual" />
    <meta name="author" content="Call Countdown App" />
    <meta name="robots" content="index, follow" />
    
    <!-- Open Graph ãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta property="og:title" content="à¤•à¥‰à¤² à¤•à¤¾à¤‰à¤‚à¤Ÿà¤¡à¤¾ã‚¦à¤¨ - Beautiful Countdown Timer" />
    <meta property="og:description" content="å¤šè¨€èªå¯¾å¿œã®ç¾ã—ã„ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼ã€‚ã‚¤ãƒ³ãƒ‰éŸ³æ¥½ã¨ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§æ™‚é–“ã‚’ã‚«ã‚¦ãƒ³ãƒˆã€‚" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="hi_IN" />
    <meta property="og:locale:alternate" content="ja_JP" />
    <meta property="og:locale:alternate" content="en_US" />
    
    <!-- Twitter Card ãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="à¤•à¥‰à¤² à¤•à¤¾à¤‰à¤‚à¤Ÿà¤¡à¤¾ã‚¦à¤¨ - Call Countdown Timer" />
    <meta name="twitter:description" content="50è¨€èªå¯¾å¿œã®ç¾ã—ã„ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒãƒ¼" />
    
    <!-- ãã®ä»–ã®é‡è¦ãªãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta name="theme-color" content="#0f172a" />
    <meta name="format-detection" content="telephone=no" />
    <link rel="canonical" href="#" />
    
    <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-XSS-Protection" content="1; mode=block" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'unsafe-inline'; style-src 'unsafe-inline'; media-src data:; connect-src 'self';" />
    <style>
      :root {
        --fg: #e5e7eb;
        --sub: #94a3b8;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: url("./bg.jpg") repeat;
        /* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–: background-attachment: fixedã‚’å‰Šé™¤ */
        color: var(--fg);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: system-ui, -apple-system, Segoe UI, Roboto,
          Noto Sans Devanagari, Noto Sans, Helvetica, Arial, "Apple Color Emoji",
          "Segoe UI Emoji";
        overflow: hidden;
        /* GPUåŠ é€Ÿã®ãŸã‚ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– */
        transform: translateZ(0);
        backface-visibility: hidden;
        /* will-changeã‚’æœ€é©åŒ– - å¿…è¦ãªæ™‚ã®ã¿è¨­å®š */
      }
      .wrap {
        text-align: center;
        padding: 24px 32px;
        background: rgba(15, 23, 42, 0.7); /* åŠé€æ˜ã®èƒŒæ™¯ã§æ–‡å­—ã‚’è¦‹ã‚„ã™ã */
        border-radius: 16px;
        /* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– - é™çš„è¦ç´ ãªã®ã§will-changeã¯ä¸è¦ */
        transform: translateZ(0);
        backface-visibility: hidden;
        contain: layout style paint; /* æç”»æœ€é©åŒ– */
      }
      .label-top,
      .label-bottom {
        font-size: clamp(16px, 2.8vw, 24px);
        letter-spacing: 0.06em;
        color: var(--sub);
        margin: 12px 0;
      }
      .seconds {
        font-variant-numeric: tabular-nums;
        font-weight: 800;
        font-size: clamp(40px, 12vw, 160px);
        line-height: 1;
        position: relative;
        overflow: visible;
        transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        text-shadow: 
          0 0 20px rgba(255, 215, 0, 0.8),
          0 0 40px rgba(255, 165, 0, 0.6),
          0 0 60px rgba(255, 105, 180, 0.4),
          0 5px 20px rgba(0, 0, 0, 0.3);
        animation: glow 2s ease-in-out infinite alternate;
        transform-style: preserve-3d;
        perspective: 1000px;
        /* GPUåŠ é€Ÿã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– */
        transform: translateZ(0);
        backface-visibility: hidden;
        /* will-changeã¯å‹•çš„ã«åˆ¶å¾¡ */
        contain: layout style paint;
      }
      
      @keyframes glow {
        from {
          text-shadow: 
            0 0 20px rgba(255, 215, 0, 0.8),
            0 0 40px rgba(255, 165, 0, 0.6),
            0 0 60px rgba(255, 105, 180, 0.4);
        }
        to {
          text-shadow: 
            0 0 30px rgba(255, 215, 0, 1),
            0 0 50px rgba(255, 165, 0, 0.8),
            0 0 70px rgba(255, 105, 180, 0.6);
        }
      }
      
      .seconds.changing {
        transform: scale(1.1);
        filter: hue-rotate(45deg) saturate(1.5) brightness(1.3);
        text-shadow: 
          0 0 30px rgba(255, 215, 0, 1),
          0 0 50px rgba(255, 165, 0, 0.8),
          0 0 70px rgba(255, 105, 180, 0.6),
          0 10px 30px rgba(0, 0, 0, 0.4);
        animation: glow 0.8s ease-in-out infinite alternate, pulseScale 1.2s ease-in-out;
      }
      
      @keyframes pulseScale {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
      }
      
      .digit-container {
        display: inline-block;
        position: relative;
        overflow: visible;
        vertical-align: top;
        perspective: 300px;
        transform-style: preserve-3d;
        margin: 0 2px;
        /* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– */
        transform: translateZ(0);
        backface-visibility: hidden;
        /* will-changeã¯å‹•çš„ã«åˆ¶å¾¡ï¼ˆJavaScriptå´ã§ç®¡ç†ï¼‰ */
        contain: layout style paint;
        isolation: isolate; /* æç”»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†é›¢ */
      }
      
      .digit-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, rgba(255, 215, 0, 0.1), rgba(255, 105, 180, 0.1));
        border-radius: 8px;
        opacity: 0;
        transition: opacity 0.6s ease;
        z-index: -1;
      }
      
      .digit-container.animating::before {
        opacity: 1;
        animation: digitGlow 0.8s ease-out;
      }
      
      @keyframes digitGlow {
        0% { opacity: 0; transform: scale(0.8); }
        50% { opacity: 1; transform: scale(1.2); }
        100% { opacity: 0; transform: scale(1); }
      }
      
      .digit {
        display: inline-block;
        transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        position: relative;
        transform-origin: 50% 50%;
        transform-style: preserve-3d;
        /* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– */
        backface-visibility: hidden;
        /* will-changeã¯å‹•çš„ã«åˆ¶å¾¡ï¼ˆJavaScriptå´ã§ç®¡ç†ï¼‰ */
        contain: layout style paint;
      }
      
      .digit::before {
        content: attr(data-digit);
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.3;
        transform: rotateX(-90deg) translateZ(20px);
        transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        color: rgba(255, 215, 0, 0.6);
      }
      
      .digit::after {
        content: attr(data-digit);
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.2;
        transform: rotateX(90deg) translateZ(-20px);
        transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        color: rgba(255, 105, 180, 0.6);
      }
      
      .digit.flipping-out {
        transform: rotateX(-90deg) scale(0.9);
        opacity: 0;
        filter: blur(2px);
      }
      
      .digit.flipping-in {
        transform: rotateX(90deg) scale(0.9);
        opacity: 0;
        filter: blur(2px);
      }
      
      .digit.new-digit {
        transform: rotateX(0deg) scale(1);
        opacity: 1;
        filter: blur(0px);
        animation: digitBounce 0.6s ease-out;
      }
      
      @keyframes digitBounce {
        0% { transform: rotateX(0deg) scale(0.8); }
        40% { transform: rotateX(0deg) scale(1.1); }
        60% { transform: rotateX(0deg) scale(0.95); }
        100% { transform: rotateX(0deg) scale(1); }
      }
      
      @keyframes party {
        0% { transform: scale(1) rotate(0deg); }
        25% { transform: scale(1.2) rotate(5deg); }
        50% { transform: scale(0.9) rotate(-5deg); }
        75% { transform: scale(1.3) rotate(3deg); }
        100% { transform: scale(1) rotate(0deg); }
      }
      
      @keyframes digitExplosion {
        0% { transform: scale(1) rotate(0deg); }
        25% { transform: scale(1.5) rotate(180deg); }
        50% { transform: scale(1.2) rotate(360deg); }
        75% { transform: scale(1.8) rotate(540deg); }
        100% { transform: scale(1) rotate(720deg); }
      }
      
      @keyframes particleExplode {
        0% {
          transform: translate(0, 0) scale(1) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translate(calc(var(--end-x) - var(--start-x, 0px)), calc(var(--end-y) - var(--start-y, 0px))) scale(0.2) rotate(720deg);
          opacity: 0;
        }
      }
      
      @keyframes finalCountdown {
        0% { filter: hue-rotate(0deg) saturate(1); }
        25% { filter: hue-rotate(90deg) saturate(2); }
        50% { filter: hue-rotate(180deg) saturate(1.5); }
        75% { filter: hue-rotate(270deg) saturate(2); }
        100% { filter: hue-rotate(360deg) saturate(1); }
      }
      
      /* æ–°ã—ã„ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ */
      @keyframes smoothGlow {
        0% {
          text-shadow: 
            0 0 20px rgba(255, 215, 0, 0.8),
            0 0 40px rgba(255, 165, 0, 0.6),
            0 0 60px rgba(255, 105, 180, 0.4);
        }
        50% {
          text-shadow: 
            0 0 30px rgba(255, 215, 0, 1),
            0 0 60px rgba(255, 165, 0, 0.8),
            0 0 90px rgba(255, 105, 180, 0.6),
            0 0 120px rgba(0, 255, 255, 0.4);
        }
        100% {
          text-shadow: 
            0 0 25px rgba(255, 215, 0, 0.9),
            0 0 50px rgba(255, 165, 0, 0.7),
            0 0 75px rgba(255, 105, 180, 0.5);
        }
      }
      
      @keyframes cascadeIn {
        0% {
          opacity: 0;
          transform: translateY(50px) rotateX(90deg) scale(0.8);
        }
        60% {
          opacity: 0.8;
          transform: translateY(-10px) rotateX(-10deg) scale(1.05);
        }
        100% {
          opacity: 1;
          transform: translateY(0) rotateX(0deg) scale(1);
        }
      }
      
      @keyframes digitPulse {
        0%, 100% {
          transform: scale(1);
          filter: brightness(1);
        }
        50% {
          transform: scale(1.05);
          filter: brightness(1.2);
        }
      }
      
      /* ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒ–ãƒ©ãƒ¼åŠ¹æœ */
      .digit.motion-blur {
        animation: motionBlur 0.3s ease-out;
      }
      
      @keyframes motionBlur {
        0% {
          filter: blur(0px);
          transform: translateX(0);
        }
        50% {
          filter: blur(3px);
          transform: translateX(5px);
        }
        100% {
          filter: blur(0px);
          transform: translateX(0);
        }
      }
      
      /* ãƒ›ãƒ­ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯åŠ¹æœ */
      .seconds.holographic {
        background: linear-gradient(
          45deg,
          rgba(255, 0, 150, 0.1),
          rgba(0, 255, 255, 0.1),
          rgba(255, 255, 0, 0.1),
          rgba(255, 0, 150, 0.1)
        );
        background-size: 200% 200%;
        animation: holographicShift 3s ease-in-out infinite;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        color: transparent;
      }
      
      @keyframes holographicShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      @keyframes hoverParticle {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1) rotate(0deg);
        }
        100% {
          opacity: 0;
          transform: translateY(-30px) scale(0.5) rotate(360deg);
        }
      }
      
      /* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
      .performance-mode .digit {
        transition: all 0.3s ease !important;
      }
      
      .performance-mode .seconds {
        animation-duration: 3s !important;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.5) !important;
      }
      
      .performance-mode .digit-container::before {
        display: none !important;
      }
      
      /* ä½æ€§èƒ½ãƒ‡ãƒã‚¤ã‚¹å°‚ç”¨ã®æ›´ãªã‚‹æœ€é©åŒ– */
      .low-performance .digit {
        transition: opacity 0.2s ease !important;
        transform: none !important;
      }
      .low-performance .seconds {
        text-shadow: none !important;
        filter: none !important;
        animation: none !important;
      }
      .low-performance .digit-container {
        perspective: none !important;
        transform-style: flat !important;
      }
      
      /* ä¸­æ€§èƒ½ãƒ‡ãƒã‚¤ã‚¹ç”¨ã®é©åº¦ãªæœ€é©åŒ– */
      .medium-performance .digit {
        transition: all 0.4s ease !important;
      }
      .medium-performance .seconds {
        text-shadow: 0 0 15px rgba(255, 215, 0, 0.7) !important;
      }
      
      /* éš ã‚Œã‚¤ãƒ¼ã‚¹ã‚¿ãƒ¼ã‚¨ãƒƒã‚°ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
      .konami-mode {
        animation: rainbow 2s linear infinite, bounce 1s ease-in-out infinite alternate !important;
      }
      
      @keyframes rainbow {
        0% { filter: hue-rotate(0deg) saturate(2); }
        100% { filter: hue-rotate(360deg) saturate(2); }
      }
      
      @keyframes bounce {
        0% { transform: translateY(0px) scale(1); }
        100% { transform: translateY(-20px) scale(1.1); }
      }
      
      .music-control {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 215, 0, 0.2);
        border: 2px solid rgba(255, 215, 0, 0.5);
        border-radius: 50px;
        padding: 12px 20px;
        color: var(--fg);
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        gap: 8px;
        user-select: none;
        min-width: 160px;
        justify-content: center;
      }
      
      .music-control:focus {
        outline: 2px solid rgba(255, 215, 0, 0.8);
        outline-offset: 2px;
      }
      
      .music-control:hover {
        background: rgba(255, 215, 0, 0.4);
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
      }
      
      .music-control.loading {
        opacity: 0.7;
        cursor: wait;
        animation: loadingPulse 1s ease-in-out infinite;
      }
      
      @keyframes loadingPulse {
        0%, 100% { opacity: 0.7; }
        50% { opacity: 0.4; }
      }
      
      .music-control.error {
        background: rgba(239, 68, 68, 0.3);
        border-color: rgba(239, 68, 68, 0.6);
        animation: errorShake 0.5s ease-in-out;
      }
      
      @keyframes errorShake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
      }
      
      .music-control.playing {
        animation: musicPulse 1.5s ease-in-out infinite;
      }
      
      @keyframes musicPulse {
        0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.4); }
        50% { box-shadow: 0 0 25px rgba(255, 215, 0, 0.8); }
      }
      
      .volume-control {
        position: fixed;
        top: 80px;
        right: 20px;
        background: rgba(255, 215, 0, 0.2);
        border: 2px solid rgba(255, 215, 0, 0.5);
        border-radius: 20px;
        padding: 15px;
        backdrop-filter: blur(10px);
        display: none;
        flex-direction: column;
        gap: 10px;
        align-items: center;
        min-width: 140px;
      }
      
      .volume-label {
        font-size: 12px;
        color: var(--fg);
        opacity: 0.8;
      }
      
      .language-selector {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(138, 43, 226, 0.2);
        border: 2px solid rgba(138, 43, 226, 0.5);
        border-radius: 50px;
        padding: 12px 20px;
        color: var(--fg);
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .language-selector:focus {
        outline: 2px solid rgba(138, 43, 226, 0.8);
        outline-offset: 2px;
      }
      
      .language-selector:hover {
        background: rgba(138, 43, 226, 0.4);
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(138, 43, 226, 0.6);
      }
      
      .language-dropdown {
        position: fixed;
        top: 80px;
        left: 20px;
        background: rgba(15, 23, 42, 0.95);
        border: 2px solid rgba(138, 43, 226, 0.5);
        border-radius: 15px;
        padding: 15px;
        backdrop-filter: blur(15px);
        display: none;
        max-height: 400px;
        overflow-y: auto;
        width: 280px;
        z-index: 1000;
      }
      
      .language-dropdown.show {
        display: block;
        animation: fadeInDown 0.3s ease-out;
      }
      
      .language-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
      }
      
      .language-option {
        padding: 8px 12px;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 13px;
        text-align: center;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      
      .language-option:hover {
        background: rgba(138, 43, 226, 0.3);
        transform: scale(1.02);
      }
      
      .language-option.active {
        background: rgba(138, 43, 226, 0.6);
        border-color: rgba(138, 43, 226, 0.8);
      }
      
      .volume-control.show {
        display: block;
        animation: fadeInDown 0.3s ease-out;
      }
      
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes fadeOutUp {
        from {
          opacity: 1;
          transform: translateY(0);
        }
        to {
          opacity: 0;
          transform: translateY(-20px);
        }
      }
      
      .volume-slider {
        width: 100px;
        height: 4px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        outline: none;
        appearance: none;
        cursor: pointer;
      }
      
      .volume-value {
        font-size: 11px;
        color: var(--fg);
        opacity: 0.9;
        font-weight: 600;
      }
      
      .volume-slider::-webkit-slider-thumb {
        appearance: none;
        width: 12px;
        height: 12px;
        background: #ffd700;
        border-radius: 50%;
        cursor: pointer;
      }
      
      .floating-notes {
        position: fixed;
        pointer-events: none;
        font-size: 24px;
        color: rgba(255, 215, 0, 0.7);
        animation: floatUp 4s ease-out infinite;
      }
      
      @keyframes floatUp {
        0% {
          opacity: 0;
          transform: translateY(0) rotate(0deg);
        }
        20% {
          opacity: 1;
        }
        80% {
          opacity: 0.8;
        }
        100% {
          opacity: 0;
          transform: translateY(-100vh) rotate(360deg);
        }
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
      
      /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æœ€é©åŒ– */
      @media (max-width: 768px) {
        .wrap {
          padding: 16px 20px;
          margin: 10px;
        }
        
        .language-selector, .music-control {
          padding: 8px 12px;
          font-size: 12px;
          min-width: 120px;
        }
        
        .seconds {
          font-size: clamp(30px, 10vw, 100px);
        }
      }
      
      @media (max-width: 480px) {
        .language-dropdown {
          width: 250px;
          left: 10px;
        }
        
        .volume-control {
          right: 10px;
          min-width: 120px;
        }
        
        .seconds {
          font-size: clamp(24px, 8vw, 80px);
        }
      }
      
      /* ãƒ—ãƒªãƒ³ãƒˆç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
      @media print {
        .language-selector, .music-control, .volume-control, .language-dropdown {
          display: none !important;
        }
        
        body {
          background: white !important;
          color: black !important;
        }
        
        .wrap {
          background: transparent !important;
          color: black !important;
        }
      }
      
      /* å‹•ãã‚’æ¸›ã‚‰ã™ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£è¨­å®š */
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
    </style>
  </head>
  <body>
    <button class="language-selector" id="languageSelector" type="button" aria-label="è¨€èªé¸æŠ" aria-expanded="false">
      <span id="langIcon" aria-hidden="true">ğŸŒ</span>
      <span id="langText">à¤­à¤¾à¤·à¤¾ à¤šà¥à¤¨à¥‡à¤‚</span>
    </button>
    
    <div class="language-dropdown" id="languageDropdown">
      <div class="language-grid" id="languageGrid">
        <!-- è¨€èªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ JavaScript ã§ç”Ÿæˆ -->
      </div>
    </div>
    
    <button class="music-control" id="musicControl" type="button" aria-label="éŸ³æ¥½ã®å†ç”Ÿãƒ»åœæ­¢">
      <span id="musicIcon" aria-hidden="true">ğŸµ</span>
      <span id="musicText">à¤­à¤¾à¤°à¤¤à¥€à¤¯ à¤¸à¤‚à¤—à¥€à¤¤</span>
    </button>
    
    <div class="volume-control" id="volumeControl">
      <div class="volume-label">ğŸ”Š éŸ³é‡èª¿æ•´</div>
      <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.05" value="0.5" aria-label="éŸ³é‡èª¿æ•´">
      <div class="volume-value" id="volumeValue">50%</div>
      <div style="font-size: 10px; opacity: 0.7; text-align: center; margin-top: 5px;">å³ã‚¯ãƒªãƒƒã‚¯ or é•·æŠ¼ã—ã§è¡¨ç¤º</div>
    </div>

    <main class="wrap" role="main">
      <header class="label-top">à¤ªà¥à¤°à¤¿à¤¯ à¤®à¤¿à¤¤à¥à¤°, à¤†à¤ªà¤•à¥‡ à¤•à¥‰à¤² à¤¤à¤•</header>
      <div id="seconds" class="seconds" role="timer" aria-live="polite" aria-label="ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³" aria-describedby="desc">à¥¦</div>
      <footer class="label-bottom">à¤¸à¥‡à¤•à¤‚à¤¡ à¤¹à¥ˆà¤‚à¥¤</footer>
      <div id="desc" class="sr-only">
        2025å¹´8æœˆ24æ—¥21æ™‚00åˆ†ï¼ˆJSTï¼‰ã¾ã§ã®æ®‹ã‚Šç§’æ•°ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
      </div>
    </main>
    
    <!-- éŸ³æ¥½ã¯å®Œå…¨ã«Web Audio APIã§ç”Ÿæˆ -->

    <script>
      const targetMs = new Date("2025-08-25T21:00:00+09:00").getTime();
      const el = document.getElementById("seconds");

      // 50è¨€èªä»¥ä¸Šã®å¯¾å¿œãƒ‡ãƒ¼ã‚¿
      const languages = {
        'hi': { // ãƒ’ãƒ³ãƒ‡ã‚£ãƒ¼èª (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
          name: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à¤ªà¥à¤°à¤¿à¤¯ à¤®à¤¿à¤¤à¥à¤°, à¤†à¤ªà¤•à¥‡ à¤•à¥‰à¤² à¤¤à¤•',
          bottom: 'à¤¸à¥‡à¤•à¤‚à¤¡ à¤¹à¥ˆà¤‚à¥¤',
          digits: ["à¥¦", "à¥§", "à¥¨", "à¥©", "à¥ª", "à¥«", "à¥¬", "à¥­", "à¥®", "à¥¯"],
          music: 'à¤­à¤¾à¤°à¤¤à¥€à¤¯ à¤¸à¤‚à¤—à¥€à¤¤',
          lang_select: 'à¤­à¤¾à¤·à¤¾ à¤šà¥à¤¨à¥‡à¤‚'
        },
        'en': { // è‹±èª
          name: 'English',
          flag: 'ğŸ‡ºğŸ‡¸',
          top: 'Dear friend, until your call',
          bottom: 'seconds remaining.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indian Music',
          lang_select: 'Select Language'
        },
        'ja': { // æ—¥æœ¬èª
          name: 'æ—¥æœ¬èª',
          flag: 'ğŸ‡¯ğŸ‡µ',
          top: 'è¦ªæ„›ãªã‚‹å‹äººã€ã‚ãªãŸã®é€šè©±ã¾ã§',
          bottom: 'ç§’ã§ã™ã€‚',
          digits: ["ï¼", "ï¼‘", "ï¼’", "ï¼“", "ï¼”", "ï¼•", "ï¼–", "ï¼—", "ï¼˜", "ï¼™"],
          music: 'ã‚¤ãƒ³ãƒ‰éŸ³æ¥½',
          lang_select: 'è¨€èªé¸æŠ'
        },
        'ar': { // ã‚¢ãƒ©ãƒ“ã‚¢èª
          name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
          flag: 'ğŸ‡¸ğŸ‡¦',
          top: 'Ø¹Ø²ÙŠØ²ÙŠ Ø§Ù„ØµØ¯ÙŠÙ‚ØŒ Ø­ØªÙ‰ Ù…ÙƒØ§Ù„Ù…ØªÙƒ',
          bottom: 'Ø«Ø§Ù†ÙŠØ© Ù…ØªØ¨Ù‚ÙŠØ©.',
          digits: ["Ù ", "Ù¡", "Ù¢", "Ù£", "Ù¤", "Ù¥", "Ù¦", "Ù§", "Ù¨", "Ù©"],
          music: 'Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ù‡Ù†Ø¯ÙŠØ©',
          lang_select: 'Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©'
        },
        'zh': { // ä¸­å›½èª
          name: 'ä¸­æ–‡',
          flag: 'ğŸ‡¨ğŸ‡³',
          top: 'äº²çˆ±çš„æœ‹å‹ï¼Œè·ç¦»æ‚¨çš„é€šè¯è¿˜æœ‰',
          bottom: 'ç§’ã€‚',
          digits: ["ã€‡", "ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "ä¸ƒ", "å…«", "ä¹"],
          music: 'å°åº¦éŸ³ä¹',
          lang_select: 'é€‰æ‹©è¯­è¨€'
        },
        'es': { // ã‚¹ãƒšã‚¤ãƒ³èª
          name: 'EspaÃ±ol',
          flag: 'ğŸ‡ªğŸ‡¸',
          top: 'Querido amigo, hasta tu llamada',
          bottom: 'segundos restantes.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'MÃºsica India',
          lang_select: 'Seleccionar Idioma'
        },
        'fr': { // ãƒ•ãƒ©ãƒ³ã‚¹èª
          name: 'FranÃ§ais',
          flag: 'ğŸ‡«ğŸ‡·',
          top: 'Cher ami, jusqu\'Ã  ton appel',
          bottom: 'secondes restantes.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Musique Indienne',
          lang_select: 'Choisir la Langue'
        },
        'de': { // ãƒ‰ã‚¤ãƒ„èª
          name: 'Deutsch',
          flag: 'ğŸ‡©ğŸ‡ª',
          top: 'Lieber Freund, bis zu deinem Anruf',
          bottom: 'Sekunden verbleibend.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indische Musik',
          lang_select: 'Sprache WÃ¤hlen'
        },
        'ru': { // ãƒ­ã‚·ã‚¢èª
          name: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹',
          flag: 'ğŸ‡·ğŸ‡º',
          top: 'Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ¾Ğ¹ Ğ´Ñ€ÑƒĞ³, Ğ´Ğ¾ Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾ Ğ·Ğ²Ğ¾Ğ½ĞºĞ°',
          bottom: 'ÑĞµĞºÑƒĞ½Ğ´ Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Ğ˜Ğ½Ğ´Ğ¸Ğ¹ÑĞºĞ°Ñ ĞœÑƒĞ·Ñ‹ĞºĞ°',
          lang_select: 'Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¯Ğ·Ñ‹Ğº'
        },
        'pt': { // ãƒãƒ«ãƒˆã‚¬ãƒ«èª
          name: 'PortuguÃªs',
          flag: 'ğŸ‡µğŸ‡¹',
          top: 'Caro amigo, atÃ© sua chamada',
          bottom: 'segundos restantes.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'MÃºsica Indiana',
          lang_select: 'Selecionar Idioma'
        },
        'it': { // ã‚¤ã‚¿ãƒªã‚¢èª
          name: 'Italiano',
          flag: 'ğŸ‡®ğŸ‡¹',
          top: 'Caro amico, fino alla tua chiamata',
          bottom: 'secondi rimanenti.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Musica Indiana',
          lang_select: 'Seleziona Lingua'
        },
        'ko': { // éŸ“å›½èª
          name: 'í•œêµ­ì–´',
          flag: 'ğŸ‡°ğŸ‡·',
          top: 'ì¹œì• í•˜ëŠ” ì¹œêµ¬, ë‹¹ì‹ ì˜ í†µí™”ê¹Œì§€',
          bottom: 'ì´ˆ ë‚¨ì•˜ìŠµë‹ˆë‹¤.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'ì¸ë„ ìŒì•…',
          lang_select: 'ì–¸ì–´ ì„ íƒ'
        },
        'th': { // ã‚¿ã‚¤èª
          name: 'à¹„à¸—à¸¢',
          flag: 'ğŸ‡¹ğŸ‡­',
          top: 'à¹€à¸à¸·à¹ˆà¸­à¸™à¸£à¸±à¸ à¸ˆà¸™à¸à¸§à¹ˆà¸²à¸ˆà¸°à¸–à¸¶à¸‡à¸à¸²à¸£à¹‚à¸—à¸£à¸‚à¸­à¸‡à¸„à¸¸à¸“',
          bottom: 'à¸§à¸´à¸™à¸²à¸—à¸µà¹€à¸«à¸¥à¸·à¸­à¸­à¸¢à¸¹à¹ˆ',
          digits: ["à¹", "à¹‘", "à¹’", "à¹“", "à¹”", "à¹•", "à¹–", "à¹—", "à¹˜", "à¹™"],
          music: 'à¹€à¸à¸¥à¸‡à¸­à¸´à¸™à¹€à¸”à¸µà¸¢',
          lang_select: 'à¹€à¸¥à¸·à¸­à¸à¸ à¸²à¸©à¸²'
        },
        'vi': { // ãƒ™ãƒˆãƒŠãƒ èª
          name: 'Tiáº¿ng Viá»‡t',
          flag: 'ğŸ‡»ğŸ‡³',
          top: 'Báº¡n thÃ¢n máº¿n, Ä‘áº¿n cuá»™c gá»i cá»§a báº¡n',
          bottom: 'giÃ¢y cÃ²n láº¡i.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Nháº¡c áº¤n Äá»™',
          lang_select: 'Chá»n NgÃ´n Ngá»¯'
        },
        'tr': { // ãƒˆãƒ«ã‚³èª
          name: 'TÃ¼rkÃ§e',
          flag: 'ğŸ‡¹ğŸ‡·',
          top: 'Sevgili arkadaÅŸ, aramanÄ±za kadar',
          bottom: 'saniye kaldÄ±.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Hint MÃ¼ziÄŸi',
          lang_select: 'Dil SeÃ§'
        },
        'pl': { // ãƒãƒ¼ãƒ©ãƒ³ãƒ‰èª
          name: 'Polski',
          flag: 'ğŸ‡µğŸ‡±',
          top: 'Drogi przyjacielu, do twojego telefonu',
          bottom: 'sekund pozostaÅ‚o.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Muzyka Indyjska',
          lang_select: 'Wybierz JÄ™zyk'
        },
        'nl': { // ã‚ªãƒ©ãƒ³ãƒ€èª
          name: 'Nederlands',
          flag: 'ğŸ‡³ğŸ‡±',
          top: 'Beste vriend, tot je gesprek',
          bottom: 'seconden over.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indiase Muziek',
          lang_select: 'Taal Kiezen'
        },
        'sv': { // ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³èª
          name: 'Svenska',
          flag: 'ğŸ‡¸ğŸ‡ª',
          top: 'KÃ¤ra vÃ¤n, till ditt samtal',
          bottom: 'sekunder kvar.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indisk Musik',
          lang_select: 'VÃ¤lj SprÃ¥k'
        },
        'no': { // ãƒãƒ«ã‚¦ã‚§ãƒ¼èª
          name: 'Norsk',
          flag: 'ğŸ‡³ğŸ‡´',
          top: 'KjÃ¦re venn, til samtalen din',
          bottom: 'sekunder igjen.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indisk Musikk',
          lang_select: 'Velg SprÃ¥k'
        },
        'da': { // ãƒ‡ãƒ³ãƒãƒ¼ã‚¯èª
          name: 'Dansk',
          flag: 'ğŸ‡©ğŸ‡°',
          top: 'KÃ¦re ven, til dit opkald',
          bottom: 'sekunder tilbage.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indisk Musik',
          lang_select: 'VÃ¦lg Sprog'
        },
        'fi': { // ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰èª
          name: 'Suomi',
          flag: 'ğŸ‡«ğŸ‡®',
          top: 'Rakas ystÃ¤vÃ¤, puheluusi asti',
          bottom: 'sekuntia jÃ¤ljellÃ¤.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Intialainen Musiikki',
          lang_select: 'Valitse Kieli'
        },
        'el': { // ã‚®ãƒªã‚·ãƒ£èª
          name: 'Î•Î»Î»Î·Î½Î¹ÎºÎ¬',
          flag: 'ğŸ‡¬ğŸ‡·',
          top: 'Î‘Î³Î±Ï€Î·Ï„Î­ Ï†Î¯Î»Îµ, Î¼Î­Ï‡ÏÎ¹ Ï„Î·Î½ ÎºÎ»Î®ÏƒÎ· ÏƒÎ¿Ï…',
          bottom: 'Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î± Î±Ï€Î¿Î¼Î­Î½Î¿Ï…Î½.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Î™Î½Î´Î¹ÎºÎ® ÎœÎ¿Ï…ÏƒÎ¹ÎºÎ®',
          lang_select: 'Î•Ï€Î¹Î»Î¿Î³Î® Î“Î»ÏÏƒÏƒÎ±Ï‚'
        },
        'he': { // ãƒ˜ãƒ–ãƒ©ã‚¤èª
          name: '×¢×‘×¨×™×ª',
          flag: 'ğŸ‡®ğŸ‡±',
          top: '×—×‘×¨ ×™×§×¨, ×¢×“ ×”×©×™×—×” ×©×œ×š',
          bottom: '×©× ×™×•×ª × ×•×ª×¨×•.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: '××•×–×™×§×” ×”×•×“×™×ª',
          lang_select: '×‘×—×¨ ×©×¤×”'
        },
        'fa': { // ãƒšãƒ«ã‚·ã‚¢èª
          name: 'ÙØ§Ø±Ø³ÛŒ',
          flag: 'ğŸ‡®ğŸ‡·',
          top: 'Ø¯ÙˆØ³Øª Ø¹Ø²ÛŒØ²ØŒ ØªØ§ ØªÙ…Ø§Ø³ Ø´Ù…Ø§',
          bottom: 'Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø§Ù‚ÛŒ Ù…Ø§Ù†Ø¯Ù‡.',
          digits: ["Û°", "Û±", "Û²", "Û³", "Û´", "Ûµ", "Û¶", "Û·", "Û¸", "Û¹"],
          music: 'Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ù‡Ù†Ø¯ÛŒ',
          lang_select: 'Ø§Ù†ØªØ®Ø§Ø¨ Ø²Ø¨Ø§Ù†'
        },
        'ur': { // ã‚¦ãƒ«ãƒ‰ã‚¥ãƒ¼èª
          name: 'Ø§Ø±Ø¯Ùˆ',
          flag: 'ğŸ‡µğŸ‡°',
          top: 'Ù¾ÛŒØ§Ø±Û’ Ø¯ÙˆØ³ØªØŒ Ø¢Ù¾ Ú©ÛŒ Ú©Ø§Ù„ ØªÚ©',
          bottom: 'Ø³ÛŒÚ©Ù†Úˆ Ø¨Ø§Ù‚ÛŒ ÛÛŒÚºÛ”',
          digits: ["Û°", "Û±", "Û²", "Û³", "Û´", "Ûµ", "Û¶", "Û·", "Û¸", "Û¹"],
          music: 'Ø¨Ú¾Ø§Ø±ØªÛŒ Ù…ÙˆØ³ÛŒÙ‚ÛŒ',
          lang_select: 'Ø²Ø¨Ø§Ù† Ù…Ù†ØªØ®Ø¨ Ú©Ø±ÛŒÚº'
        },
        'bn': { // ãƒ™ãƒ³ã‚¬ãƒ«èª
          name: 'à¦¬à¦¾à¦‚à¦²à¦¾',
          flag: 'ğŸ‡§ğŸ‡©',
          top: 'à¦ªà§à¦°à¦¿à¦¯à¦¼ à¦¬à¦¨à§à¦§à§, à¦¤à§‹à¦®à¦¾à¦° à¦•à¦² à¦ªà¦°à§à¦¯à¦¨à§à¦¤',
          bottom: 'à¦¸à§‡à¦•à§‡à¦¨à§à¦¡ à¦¬à¦¾à¦•à¦¿à¥¤',
          digits: ["à§¦", "à§§", "à§¨", "à§©", "à§ª", "à§«", "à§¬", "à§­", "à§®", "à§¯"],
          music: 'à¦­à¦¾à¦°à¦¤à§€à¦¯à¦¼ à¦¸à¦‚à¦—à§€à¦¤',
          lang_select: 'à¦­à¦¾à¦·à¦¾ à¦¨à¦¿à¦°à§à¦¬à¦¾à¦šà¦¨'
        },
        'ta': { // ã‚¿ãƒŸãƒ«èª
          name: 'à®¤à®®à®¿à®´à¯',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à®…à®©à¯à®ªà¯ à®¨à®£à¯à®ªà®¾, à®‰à®™à¯à®•à®³à¯ à®…à®´à¯ˆà®ªà¯à®ªà¯ à®µà®°à¯ˆ',
          bottom: 'à®µà®¿à®©à®¾à®Ÿà®¿à®•à®³à¯ à®‰à®³à¯à®³à®©.',
          digits: ["à¯¦", "à¯§", "à¯¨", "à¯©", "à¯ª", "à¯«", "à¯¬", "à¯­", "à¯®", "à¯¯"],
          music: 'à®‡à®¨à¯à®¤à®¿à®¯ à®‡à®šà¯ˆ',
          lang_select: 'à®®à¯Šà®´à®¿ à®¤à¯‡à®°à¯à®µà¯'
        },
        'te': { // ãƒ†ãƒ«ã‚°èª
          name: 'à°¤à±†à°²à±à°—à±',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à°ªà±à°°à°¿à°¯à°®à±ˆà°¨ à°¸à±à°¨à±‡à°¹à°¿à°¤à±à°¡à°¾, à°®à±€ à°•à°¾à°²à± à°µà°°à°•à±',
          bottom: 'à°¸à±†à°•à°¨à±à°²à± à°‰à°¨à±à°¨à°¾à°¯à°¿.',
          digits: ["à±¦", "à±§", "à±¨", "à±©", "à±ª", "à±«", "à±¬", "à±­", "à±®", "à±¯"],
          music: 'à°­à°¾à°°à°¤à±€à°¯ à°¸à°‚à°—à±€à°¤à°‚',
          lang_select: 'à°­à°¾à°· à°à°‚à°ªà°¿à°•'
        },
        'ml': { // ãƒãƒ©ãƒ¤ãƒ¼ãƒ©ãƒ èª
          name: 'à´®à´²à´¯à´¾à´³à´‚',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à´ªàµà´°à´¿à´¯ à´¸àµà´¹àµƒà´¤àµà´¤àµ‡, à´¨à´¿à´™àµà´™à´³àµà´Ÿàµ† à´•à´¾àµ¾ à´µà´°àµ†',
          bottom: 'à´¸àµ†à´•àµà´•àµ»à´¡àµà´•àµ¾ à´‰à´£àµà´Ÿàµ.',
          digits: ["àµ¦", "àµ§", "àµ¨", "àµ©", "àµª", "àµ«", "àµ¬", "àµ­", "àµ®", "àµ¯"],
          music: 'à´‡à´¨àµà´¤àµà´¯àµ» à´¸à´‚à´—àµ€à´¤à´‚',
          lang_select: 'à´­à´¾à´· à´¤à´¿à´°à´àµà´àµ†à´Ÿàµà´•àµà´•àµà´•'
        },
        'kn': { // ã‚«ãƒ³ãƒŠãƒ€èª
          name: 'à²•à²¨à³à²¨à²¡',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à²ªà³à²°à²¿à²¯ à²¸à³à²¨à³‡à²¹à²¿à²¤, à²¨à²¿à²®à³à²® à²•à²¾à²²à³ à²µà²°à³†à²—à³†',
          bottom: 'à²¸à³†à²•à³†à²‚à²¡à³à²—à²³à²¿à²µà³†.',
          digits: ["à³¦", "à³§", "à³¨", "à³©", "à³ª", "à³«", "à³¬", "à³­", "à³®", "à³¯"],
          music: 'à²­à²¾à²°à²¤à³€à²¯ à²¸à²‚à²—à³€à²¤',
          lang_select: 'à²­à²¾à²·à³† à²†à²¯à³à²•à³†'
        },
        'gu': { // ã‚°ã‚¸ãƒ£ãƒ©ãƒ¼ãƒˆèª
          name: 'àª—à«àªœàª°àª¾àª¤à«€',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'àªªà«àª°àª¿àª¯ àª®àª¿àª¤à«àª°, àª¤àª®àª¾àª°àª¾ àª•à«‹àª² àª¸à«àª§à«€',
          bottom: 'àª¸à«‡àª•àª¨à«àª¡ àª›à«‡.',
          digits: ["à«¦", "à«§", "à«¨", "à«©", "à«ª", "à««", "à«¬", "à«­", "à«®", "à«¯"],
          music: 'àª­àª¾àª°àª¤à«€àª¯ àª¸àª‚àª—à«€àª¤',
          lang_select: 'àª­àª¾àª·àª¾ àªªàª¸àª‚àª¦ àª•àª°à«‹'
        },
        'pa': { // ãƒ‘ãƒ³ã‚¸ãƒ£ãƒ–èª
          name: 'à¨ªà©°à¨œà¨¾à¨¬à©€',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à¨ªà¨¿à¨†à¨°à©‡ à¨¦à©‹à¨¸à¨¤, à¨¤à©à¨¹à¨¾à¨¡à©€ à¨•à¨¾à¨² à¨¤à©±à¨•',
          bottom: 'à¨¸à¨•à¨¿à©°à¨Ÿ à¨¹à¨¨à¥¤',
          digits: ["à©¦", "à©§", "à©¨", "à©©", "à©ª", "à©«", "à©¬", "à©­", "à©®", "à©¯"],
          music: 'à¨­à¨¾à¨°à¨¤à©€ à¨¸à©°à¨—à©€à¨¤',
          lang_select: 'à¨­à¨¾à¨¸à¨¼à¨¾ à¨šà©à¨£à©‹'
        },
        'or': { // ã‚ªãƒªãƒ¤ãƒ¼èª
          name: 'à¬“à¬¡à¬¼à¬¿à¬†',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à¬ªà­à¬°à¬¿à­Ÿ à¬®à¬¿à¬¤à­à¬°, à¬¤à­à¬®à¬° à¬•à¬²à­ à¬ªà¬°à­à¬¯à­à­Ÿà¬¨à­à¬¤',
          bottom: 'à¬¸à­‡à¬•à­‡à¬£à­à¬¡ à¬…à¬›à¬¿à¥¤',
          digits: ["à­¦", "à­§", "à­¨", "à­©", "à­ª", "à­«", "à­¬", "à­­", "à­®", "à­¯"],
          music: 'à¬­à¬¾à¬°à¬¤à­€à­Ÿ à¬¸à¬™à­à¬—à­€à¬¤',
          lang_select: 'à¬­à¬¾à¬·à¬¾ à¬¬à¬¾à¬›'
        },
        'as': { // ã‚¢ãƒƒã‚µãƒ èª
          name: 'à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à¦ªà§à§°à¦¿à¦¯à¦¼ à¦¬à¦¨à§à¦§à§, à¦¤à§‹à¦®à¦¾à§° à¦•à¦² à¦ªà§°à§à¦¯à¦¨à§à¦¤',
          bottom: 'à¦šà§‡à¦•à§‡à¦£à§à¦¡ à¦†à¦›à§‡à¥¤',
          digits: ["à§¦", "à§§", "à§¨", "à§©", "à§ª", "à§«", "à§¬", "à§­", "à§®", "à§¯"],
          music: 'à¦­à¦¾à§°à¦¤à§€à¦¯à¦¼ à¦¸à¦‚à¦—à§€à¦¤',
          lang_select: 'à¦­à¦¾à¦·à¦¾ à¦¨à¦¿à§°à§à¦¬à§à¦¬à¦¾à¦šà¦¨'
        },
        'mr': { // ãƒãƒ©ãƒ¼ãƒ†ã‚£ãƒ¼èª
          name: 'à¤®à¤°à¤¾à¤ à¥€',
          flag: 'ğŸ‡®ğŸ‡³',
          top: 'à¤ªà¥à¤°à¤¿à¤¯ à¤®à¤¿à¤¤à¥à¤°à¤¾, à¤¤à¥à¤à¥à¤¯à¤¾ à¤•à¥‰à¤²à¤ªà¤°à¥à¤¯à¤‚à¤¤',
          bottom: 'à¤¸à¥‡à¤•à¤‚à¤¦ à¤†à¤¹à¥‡à¤¤.',
          digits: ["à¥¦", "à¥§", "à¥¨", "à¥©", "à¥ª", "à¥«", "à¥¬", "à¥­", "à¥®", "à¥¯"],
          music: 'à¤­à¤¾à¤°à¤¤à¥€à¤¯ à¤¸à¤‚à¤—à¥€à¤¤',
          lang_select: 'à¤­à¤¾à¤·à¤¾ à¤¨à¤¿à¤µà¤¡à¤¾'
        },
        'ne': { // ãƒãƒ‘ãƒ¼ãƒ«èª
          name: 'à¤¨à¥‡à¤ªà¤¾à¤²à¥€',
          flag: 'ğŸ‡³ğŸ‡µ',
          top: 'à¤ªà¥à¤°à¤¿à¤¯ à¤¸à¤¾à¤¥à¥€, à¤¤à¤ªà¤¾à¤ˆà¤‚à¤•à¥‹ à¤•à¤² à¤¸à¤®à¥à¤®',
          bottom: 'à¤¸à¥‡à¤•à¥‡à¤¨à¥à¤¡ à¤›à¥¤',
          digits: ["à¥¦", "à¥§", "à¥¨", "à¥©", "à¥ª", "à¥«", "à¥¬", "à¥­", "à¥®", "à¥¯"],
          music: 'à¤­à¤¾à¤°à¤¤à¥€à¤¯ à¤¸à¤‚à¤—à¥€à¤¤',
          lang_select: 'à¤­à¤¾à¤·à¤¾ à¤›à¤¾à¤¨à¥à¤¨à¥à¤¹à¥‹à¤¸à¥'
        },
        'si': { // ã‚·ãƒ³ãƒãƒ©èª
          name: 'à·ƒà·’à¶‚à·„à¶½',
          flag: 'ğŸ‡±ğŸ‡°',
          top: 'à¶†à¶¯à¶»à¶«à·“à¶º à¶¸à·’à¶­à·Šâ€à¶»à¶ºà·, à¶”à¶¶à·š à¶‡à¶¸à¶­à·”à¶¸ à¶¯à¶šà·Šà·€à·',
          bottom: 'à¶­à¶­à·Šà¶´à¶» à¶‡à¶­.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'à¶‰à¶±à·Šà¶¯à·’à¶ºà·à¶±à·” à·ƒà¶‚à¶œà·“à¶­à¶º',
          lang_select: 'à¶·à·à·‚à·à·€ à¶­à·à¶»à¶±à·Šà¶±'
        },
        'my': { // ãƒŸãƒ£ãƒ³ãƒãƒ¼èª
          name: 'á€™á€¼á€”á€ºá€™á€¬',
          flag: 'ğŸ‡²ğŸ‡²',
          top: 'á€á€»á€…á€ºá€á€±á€¬ á€™á€­á€á€ºá€†á€½á€±áŠ á€á€„á€ºá á€á€±á€«á€ºá€†á€­á€¯á€™á€¾á€¯ á€¡á€‘á€­',
          bottom: 'á€…á€€á€¹á€€á€”á€·á€º á€€á€»á€”á€ºá€á€Šá€ºá‹',
          digits: ["á€", "á", "á‚", "áƒ", "á„", "á…", "á†", "á‡", "áˆ", "á‰"],
          music: 'á€¡á€­á€”á€¹á€’á€­á€š á€‚á€®á€',
          lang_select: 'á€˜á€¬á€á€¬á€…á€€á€¬á€¸ á€›á€½á€±á€¸á€á€»á€šá€ºá€•á€«'
        },
        'km': { // ã‚¯ãƒ¡ãƒ¼ãƒ«èª
          name: 'ááŸ’á˜áŸ‚áš',
          flag: 'ğŸ‡°ğŸ‡­',
          top: 'á˜á·ááŸ’áá‡á¶á‘á¸áŸáŸ’ášá¡á¶á‰áŸ‹ ášá á¼ááŠá›áŸ‹á€á¶ášá áŸ…ášá”áŸáŸ‹á¢áŸ’á“á€',
          bottom: 'áœá·á“á¶á‘á¸á“áŸ…áŸá›áŸ‹áŸ”',
          digits: ["áŸ ", "áŸ¡", "áŸ¢", "áŸ£", "áŸ¤", "áŸ¥", "áŸ¦", "áŸ§", "áŸ¨", "áŸ©"],
          music: 'áá“áŸ’ááŸ’ášá¸á¥ááŸ’áŒá¶',
          lang_select: 'á‡áŸ’ášá¾áŸášá¾áŸá—á¶áŸá¶'
        },
        'lo': { // ãƒ©ã‚ªã‚¹èª
          name: 'àº¥àº²àº§',
          flag: 'ğŸ‡±ğŸ‡¦',
          top: 'à»€àºàº·à»ˆàº­àº™àº—àºµà»ˆàº®àº±àºà»àºàº‡, àºˆàº»àº™àºàº§à»ˆàº²àºàº²àº™à»‚àº—àº‚àº­àº‡à»€àºˆàº»à»‰àº²',
          bottom: 'àº§àº´àº™àº²àº—àºµà»€àº«àº¼àº·àº­.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'àº”àº»àº™àº•àºµàº­àº´àº™à»€àº”àº',
          lang_select: 'à»€àº¥àº·àº­àºàºàº²àºªàº²'
        },
        'id': { // ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢èª
          name: 'Indonesia',
          flag: 'ğŸ‡®ğŸ‡©',
          top: 'Teman terkasih, sampai panggilan Anda',
          bottom: 'detik tersisa.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Musik India',
          lang_select: 'Pilih Bahasa'
        },
        'ms': { // ãƒãƒ¬ãƒ¼èª
          name: 'Bahasa Melayu',
          flag: 'ğŸ‡²ğŸ‡¾',
          top: 'Sahabat tersayang, sehingga panggilan anda',
          bottom: 'saat berbaki.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Muzik India',
          lang_select: 'Pilih Bahasa'
        },
        'tl': { // ã‚¿ã‚¬ãƒ­ã‚°èª
          name: 'Tagalog',
          flag: 'ğŸ‡µğŸ‡­',
          top: 'Mahal na kaibigan, hanggang sa tawag mo',
          bottom: 'segundo ang natitira.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Musikang Indyano',
          lang_select: 'Pumili ng Wika'
        },
        'sw': { // ã‚¹ãƒ¯ãƒ’ãƒªèª
          name: 'Kiswahili',
          flag: 'ğŸ‡¹ğŸ‡¿',
          top: 'Rafiki mpendwa, hadi simu yako',
          bottom: 'sekunde zimebakia.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Muziki wa Kihindi',
          lang_select: 'Chagua Lugha'
        },
        'am': { // ã‚¢ãƒ ãƒãƒ©èª
          name: 'áŠ áˆ›áˆ­áŠ›',
          flag: 'ğŸ‡ªğŸ‡¹',
          top: 'á‹á‹µ áŒ“á‹°áŠ›á£ áŠ¥áˆµáŠ¨ áŒ¥áˆªáˆ… á‹µáˆ¨áˆµ',
          bottom: 'áˆ°áŠ¨áŠ•á‹¶á‰½ á‹­á‰€áˆ«áˆ‰á¢',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'á‹¨áˆ•áŠ•á‹µ áˆ™á‹šá‰ƒ',
          lang_select: 'á‰‹áŠ•á‰‹ á‹­áˆáˆ¨áŒ¡'
        },
        'yo': { // ãƒ¨ãƒ«ãƒèª
          name: 'YorÃ¹bÃ¡',
          flag: 'ğŸ‡³ğŸ‡¬',
          top: 'á»ŒÌ€ráº¹Ì olÃ¹fáº¹Ì, tÃ­tÃ­ di Ã¬pÃ¨ ráº¹',
          bottom: 'Ã¬á¹£áº¹ÌjÃº kÃ¹.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Orin India',
          lang_select: 'Yan Ede'
        },
        'ig': { // ã‚¤ãƒœèª
          name: 'Igbo',
          flag: 'ğŸ‡³ğŸ‡¬',
          top: 'Enyi m dá»‹ á»cha, ruo mgbe á»‹ ga-akpá»',
          bottom: 'seká»nd fá»dá»¥rá»¥.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Egwu India',
          lang_select: 'Há»rá» Asá»¥sá»¥'
        },
        'zu': { // ã‚ºãƒ¼ãƒ«ãƒ¼èª
          name: 'isiZulu',
          flag: 'ğŸ‡¿ğŸ‡¦',
          top: 'Mngani othandekayo, kuze kube yikholi yakho',
          bottom: 'amasekhondi asele.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Umculo waseNdiya',
          lang_select: 'Khetha Ulimi'
        },
        'xh': { // ã‚³ã‚µèª
          name: 'isiXhosa',
          flag: 'ğŸ‡¿ğŸ‡¦',
          top: 'Mhlobo wam othandekayo, de kube yifowuni yakho',
          bottom: 'imizuzwana eseleyo.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Umculo waseIndiya',
          lang_select: 'Khetha Ulwimi'
        },
        'af': { // ã‚¢ãƒ•ãƒªã‚«ãƒ¼ãƒ³ã‚¹èª
          name: 'Afrikaans',
          flag: 'ğŸ‡¿ğŸ‡¦',
          top: 'Liewe vriend, tot jou oproep',
          bottom: 'sekondes oor.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indiese Musiek',
          lang_select: 'Kies Taal'
        },
        'is': { // ã‚¢ã‚¤ã‚¹ãƒ©ãƒ³ãƒ‰èª
          name: 'Ãslenska',
          flag: 'ğŸ‡®ğŸ‡¸',
          top: 'KÃ¦ri vinur, Ã¾angaÃ° til sÃ­mtaliÃ° Ã¾itt',
          bottom: 'sekÃºndur eftir.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indversk TÃ³nlist',
          lang_select: 'Velja TungumÃ¡l'
        },
        'mt': { // ãƒãƒ«ã‚¿èª
          name: 'Malti',
          flag: 'ğŸ‡²ğŸ‡¹',
          top: 'Ä¦abib gÄ§aÅ¼iÅ¼, sa t-telefonata tiegÄ§ek',
          bottom: 'sekondi fadal.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'MuÅ¼ika Indjana',
          lang_select: 'AgÄ§Å¼el Lingwa'
        },
        'cy': { // ã‚¦ã‚§ãƒ¼ãƒ«ã‚ºèª
          name: 'Cymraeg',
          flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿',
          top: 'Annwyl ffrind, tan eich galwad',
          bottom: 'eiliad ar Ã´l.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Cerddoriaeth India',
          lang_select: 'Dewiswch Iaith'
        },
        'ga': { // ã‚¢ã‚¤ãƒ«ãƒ©ãƒ³ãƒ‰èª
          name: 'Gaeilge',
          flag: 'ğŸ‡®ğŸ‡ª',
          top: 'A chara dÃ­lis, go dtÃ­ do ghlao',
          bottom: 'soicind fÃ¡gtha.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Ceol Indiach',
          lang_select: 'Roghnaigh Teanga'
        },
        'eu': { // ãƒã‚¹ã‚¯èª
          name: 'Euskera',
          flag: 'ğŸ‡ªğŸ‡¸',
          top: 'Adiskide maitea, zure deialdia arte',
          bottom: 'segundo geratzen dira.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'Indiako Musika',
          lang_select: 'Hizkuntza Hautatu'
        },
        'ca': { // ã‚«ã‚¿ãƒ«ãƒ¼ãƒ‹ãƒ£èª
          name: 'CatalÃ ',
          flag: 'ğŸ‡ªğŸ‡¸',
          top: 'Estimat amic, fins a la teva trucada',
          bottom: 'segons restants.',
          digits: ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"],
          music: 'MÃºsica Ãndia',
          lang_select: 'Selecciona Idioma'
        }
      };

      let currentLang = 'hi';
      const devanagariDigits = languages[currentLang].digits;
      
      function toCurrentLanguageDigits(num) {
        return String(num)
          .split("")
          .map((d) => languages[currentLang].digits[d] || d)
          .join("");
      }

      let previousSeconds = null;
      
      // æ”¹è‰¯ã•ã‚ŒãŸãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³åŠ¹æœ
      function addTransitionEffect() {
        el.classList.add('changing');
        setTimeout(() => {
          el.classList.remove('changing');
        }, 1200);
      }
      
      // é«˜åº¦ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
      const animationQueue = new Map();
      let animationFrame = null;
      let isReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      
      // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–: DOMè¦ç´ ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
      const cachedElements = new Map();
      const elementCache = {
        get: (selector) => {
          if (!cachedElements.has(selector)) {
            cachedElements.set(selector, document.querySelector(selector));
          }
          return cachedElements.get(selector);
        },
        clear: () => cachedElements.clear(),
        delete: (selector) => cachedElements.delete(selector)
      };
      
      // æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼
      function scheduleAnimation(element, callback) {
        if (!element || !element.isConnected) return;
        
        if (isReducedMotion) {
          callback();
          return;
        }
        
        const id = element.dataset.animId || Math.random().toString(36).substr(2, 9);
        element.dataset.animId = id;
        
        animationQueue.set(id, {
          callback: callback,
          element: element,
          timestamp: performance.now()
        });
        
        if (animationFrame) {
          cancelAnimationFrame(animationFrame);
        }
        
        animationFrame = requestAnimationFrame(() => {
          const currentTime = performance.now();
          animationQueue.forEach((data, id) => {
            if (data.element.isConnected && (currentTime - data.timestamp < 16.67)) {
              try {
                data.callback();
              } catch (error) {
                console.warn('ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼:', error);
              }
            }
            animationQueue.delete(id);
          });
          animationFrame = null;
        });
      }
      
      // å¼·åŒ–ã•ã‚ŒãŸãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã¨æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ 
      let lastFrameTime = performance.now();
      let frameCount = 0;
      let fps = 60;
      let averageFPS = 60;
      let fpsHistory = [];
      let deviceTier = 'high'; // low, medium, high
      
      // ãƒ‡ãƒã‚¤ã‚¹æ€§èƒ½ã®åˆ¤å®š
      function detectDevicePerformance() {
        const canvas = document.createElement('canvas');
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        
        if (!gl) {
          return 'low';
        }
        
        const cores = navigator.hardwareConcurrency || 4;
        const memory = navigator.deviceMemory || 4;
        const isMobile = /mobile|android|iphone|ipad/i.test(navigator.userAgent);
        
        // ç°¡å˜ãªæ€§èƒ½åˆ¤å®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
        let performanceScore = 0;
        performanceScore += cores * 10;
        performanceScore += memory * 5;
        
        if (isMobile) {
          performanceScore *= 0.6; // ãƒ¢ãƒã‚¤ãƒ«è£œæ­£
        }
        
        if (performanceScore > 80) return 'high';
        if (performanceScore > 40) return 'medium';
        return 'low';
      }
      
      function monitorPerformance() {
        const now = performance.now();
        frameCount++;
        
        if (now - lastFrameTime >= 1000) {
          const currentFPS = Math.round((frameCount * 1000) / (now - lastFrameTime));
          fpsHistory.push(currentFPS);
          
          if (fpsHistory.length > 10) {
            fpsHistory.shift();
          }
          
          // å¹³å‡FPSã‚’è¨ˆç®—
          averageFPS = fpsHistory.reduce((a, b) => a + b, 0) / fpsHistory.length;
          fps = currentFPS;
          
          frameCount = 0;
          lastFrameTime = now;
          
          // å‹•çš„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
          applyPerformanceOptimizations();
        }
        
        requestAnimationFrame(monitorPerformance);
      }
      
      function applyPerformanceOptimizations() {
        const body = document.body;
        
        // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒ™ãƒ«ã‚’åˆ¤å®š
        if (averageFPS < 20) {
          body.classList.add('performance-mode', 'low-performance');
          body.classList.remove('medium-performance');
          deviceTier = 'low';
        } else if (averageFPS < 40) {
          body.classList.add('performance-mode', 'medium-performance');
          body.classList.remove('low-performance');
          deviceTier = 'medium';
        } else {
          body.classList.remove('performance-mode', 'low-performance', 'medium-performance');
          deviceTier = 'high';
        }
        
        // ãƒ‡ãƒã‚¤ã‚¹éšå±¤åˆ¥ã®æœ€é©åŒ–é©ç”¨
        optimizeForDeviceTier(deviceTier);
      }
      
      function optimizeForDeviceTier(tier) {
        switch(tier) {
          case 'low':
            // ä½æ€§èƒ½ãƒ‡ãƒã‚¤ã‚¹: æœ€å°é™ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã¨ãƒ—ãƒ¼ãƒ«ã‚µã‚¤ã‚ºç¸®å°
            if (digitElementPool.length > 5) {
              digitElementPool.length = 5;
            }
            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–“éš”ã‚’èª¿æ•´
            isReducedMotion = true;
            break;
            
          case 'medium':
            // ä¸­æ€§èƒ½ãƒ‡ãƒã‚¤ã‚¹: é©åº¦ãªåˆ¶é™
            if (digitElementPool.length > 15) {
              digitElementPool.length = 15;
            }
            break;
            
          case 'high':
            // é«˜æ€§èƒ½ãƒ‡ãƒã‚¤ã‚¹: ãƒ•ãƒ«æ©Ÿèƒ½
            isReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            break;
        }
      }
      
      // åˆæœŸãƒ‡ãƒã‚¤ã‚¹æ€§èƒ½åˆ¤å®š
      deviceTier = detectDevicePerformance();
      optimizeForDeviceTier(deviceTier);
      
      // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–é–‹å§‹
      requestAnimationFrame(monitorPerformance);
      
      // å‹•çš„will-changeåˆ¶å¾¡ã‚·ã‚¹ãƒ†ãƒ 
      const willChangeController = {
        activeElements: new WeakSet(),
        
        enable(element, properties = 'transform') {
          if (!this.activeElements.has(element)) {
            element.style.willChange = properties;
            this.activeElements.add(element);
          }
        },
        
        disable(element) {
          if (this.activeElements.has(element)) {
            element.style.willChange = 'auto';
            this.activeElements.delete(element);
          }
        },
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†æ™‚ã«è‡ªå‹•çš„ã«will-changeã‚’ç„¡åŠ¹åŒ–
        enableTemporary(element, properties = 'transform', duration = 1000) {
          this.enable(element, properties);
          setTimeout(() => this.disable(element), duration);
        }
      };
      
      // ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢ã®ãŸã‚ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
      const eventListenerManager = {
        listeners: new Map(),
        
        add(element, event, handler, options = {}) {
          const key = `${element.tagName}-${event}-${Date.now()}-${Math.random()}`;
          element.addEventListener(event, handler, options);
          
          this.listeners.set(key, {
            element: element,
            event: event,
            handler: handler,
            options: options
          });
          
          return key;
        },
        
        remove(key) {
          const listener = this.listeners.get(key);
          if (listener) {
            listener.element.removeEventListener(listener.event, listener.handler, listener.options);
            this.listeners.delete(key);
          }
        },
        
        removeAll() {
          this.listeners.forEach((listener, key) => {
            listener.element.removeEventListener(listener.event, listener.handler, listener.options);
          });
          this.listeners.clear();
        },
        
        // è¦ç´ ãŒå‰Šé™¤ã•ã‚ŒãŸéš›ã®è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
        cleanupForElement(element) {
          const toRemove = [];
          this.listeners.forEach((listener, key) => {
            if (listener.element === element || !listener.element.isConnected) {
              toRemove.push(key);
            }
          });
          toRemove.forEach(key => this.remove(key));
        }
      };
      
      // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒ«: DOMè¦ç´ ã®å†åˆ©ç”¨
      const digitElementPool = [];
      const maxPoolSize = 20;
      
      function getDigitElement() {
        if (digitElementPool.length > 0) {
          return digitElementPool.pop();
        }
        
        const container = document.createElement('span');
        container.className = 'digit-container';
        const digitSpan = document.createElement('span');
        digitSpan.className = 'digit';
        container.appendChild(digitSpan);
        return container;
      }
      
      function returnDigitElement(element) {
        if (digitElementPool.length < maxPoolSize) {
          // ã‚¹ã‚¿ã‚¤ãƒ«ã¨ã‚¯ãƒ©ã‚¹ã‚’ã‚¯ãƒªã‚¢
          element.style.cssText = '';
          element.classList.remove('animating');
          const digitSpan = element.querySelector('.digit');
          if (digitSpan) {
            digitSpan.classList.remove('flipping-out', 'flipping-in', 'new-digit');
          }
          
          // will-changeã‚’ç„¡åŠ¹åŒ–
          willChangeController.disable(element);
          willChangeController.disable(digitSpan);
          
          // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
          eventListenerManager.cleanupForElement(element);
          
          digitElementPool.push(element);
        }
      }
      
      function createDigitElements(digitStr) {
        return digitStr.split('').map((digit, index) => {
          const container = getDigitElement();
          container.dataset.digitIndex = index;
          
          const digitSpan = container.querySelector('.digit');
          digitSpan.textContent = digit;
          digitSpan.setAttribute('data-digit', digit);
          
          return container;
        });
      }
      
      // é«˜åº¦ãªæ¡åˆ¥ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡
      function animateDigitChange(container, newDigit, index, totalDigits) {
        const digitSpan = container.querySelector('.digit');
        const cascadeDelay = (totalDigits - 1 - index) * 50; // å³ã‹ã‚‰å·¦ã¸ã®ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰åŠ¹æœ
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹å‰ã«will-changeã‚’æœ‰åŠ¹åŒ–
        willChangeController.enable(container, 'transform, opacity');
        willChangeController.enable(digitSpan, 'transform, opacity, filter');
        
        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä¸­ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
        container.classList.add('animating');
        
        // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        scheduleAnimation(container, () => {
          // ãƒ•ãƒªãƒƒãƒ—ã‚¢ã‚¦ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
          setTimeout(() => {
            digitSpan.classList.add('flipping-out');
            
            // ä¸­é–“ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´
            setTimeout(() => {
              digitSpan.textContent = newDigit;
              digitSpan.setAttribute('data-digit', newDigit);
              digitSpan.classList.remove('flipping-out');
              digitSpan.classList.add('flipping-in');
              
              // ãƒ•ãƒªãƒƒãƒ—ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
              setTimeout(() => {
                digitSpan.classList.remove('flipping-in');
                digitSpan.classList.add('new-digit');
                
                // å®Œäº†å‡¦ç†ã¨will-changeã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
                setTimeout(() => {
                  digitSpan.classList.remove('new-digit');
                  container.classList.remove('animating');
                  
                  // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†å¾Œã«will-changeã‚’ç„¡åŠ¹åŒ–
                  willChangeController.disable(container);
                  willChangeController.disable(digitSpan);
                }, 600);
              }, 50);
            }, 400);
          }, cascadeDelay);
        });
      }
      
      // å¼·åŒ–ã•ã‚ŒãŸ3DåŠ¹æœã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–æ©Ÿèƒ½
      function enhance3DEffects() {
        const containers = document.querySelectorAll('.digit-container');
        containers.forEach((container, index) => {
          const digitSpan = container.querySelector('.digit');
          
          // ãƒã‚¦ã‚¹ãƒ›ãƒãƒ¼æ™‚ã®å¼·åŒ–ã•ã‚ŒãŸ3DåŠ¹æœ
          container.addEventListener('mouseenter', () => {
            if (!container.classList.contains('animating') && !isReducedMotion) {
              digitSpan.style.transform = 'rotateY(15deg) scale(1.05) translateZ(10px)';
              digitSpan.style.textShadow = '0 0 30px rgba(255, 215, 0, 1), 0 0 60px rgba(255, 165, 0, 0.8)';
              container.style.zIndex = '10';
              
              // å¾®ç´°ãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«åŠ¹æœ
              createHoverParticles(container);
            }
          });
          
          container.addEventListener('mouseleave', () => {
            if (!container.classList.contains('animating')) {
              digitSpan.style.transform = '';
              digitSpan.style.textShadow = '';
              container.style.zIndex = '';
            }
          });
          
          // ã‚¿ãƒƒãƒãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œ
          container.addEventListener('touchstart', () => {
            if (!isReducedMotion) {
              digitSpan.style.transform = 'scale(1.1)';
              digitSpan.style.filter = 'brightness(1.2)';
            }
          });
          
          container.addEventListener('touchend', () => {
            digitSpan.style.transform = '';
            digitSpan.style.filter = '';
          });
        });
      }

      function updateLanguageDisplay() {
        const lang = languages[currentLang];
        if (!lang) {
          console.error('Language not found:', currentLang);
          return;
        }
        
        // Null ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 
        const labelTop = document.querySelector('.label-top');
        const labelBottom = document.querySelector('.label-bottom');
        const langText = document.getElementById('langText');
        const langIcon = document.getElementById('langIcon');
        const musicText = document.getElementById('musicText');
        
        if (labelTop) labelTop.textContent = lang.top;
        if (labelBottom) labelBottom.textContent = lang.bottom;
        if (langText) langText.textContent = lang.lang_select;
        if (langIcon) langIcon.textContent = lang.flag;
        if (musicText) musicText.textContent = lang.music;
        
        // HTMLã®langå±æ€§ã‚‚æ›´æ–°
        document.documentElement.lang = currentLang;
      }
      
      // æœ€é©åŒ–ã•ã‚ŒãŸrenderé–¢æ•°
      let lastRenderedSeconds = null;
      let renderBatch = [];
      
      function render() {
        const now = Date.now();
        const diffMs = Math.max(0, targetMs - now);
        const secs = Math.floor(diffMs / 1000);
        
        // ä¸è¦ãªå†æç”»ã‚’é˜²ã
        if (secs === lastRenderedSeconds) {
          return;
        }
        
        const localizedSecs = toCurrentLanguageDigits(secs);
        
        if (previousSeconds !== null && previousSeconds !== secs) {
          addTransitionEffect();
          
          // DOMæ“ä½œã‚’ãƒãƒƒãƒå‡¦ç†
          const currentDigits = el.children;
          const newDigits = localizedSecs.split('');
          
          if (currentDigits.length === newDigits.length) {
            // å¤‰æ›´ã•ã‚ŒãŸæ¡ã®ã¿ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæœ€é©åŒ–ç‰ˆï¼‰
            const previousDigits = String(previousSeconds)
              .split('')
              .map(d => languages[currentLang].digits[d] || d);
            
            renderBatch.length = 0; // é…åˆ—ã‚’ã‚¯ãƒªã‚¢
            
            newDigits.forEach((digit, index) => {
              if (currentDigits[index] && previousDigits[index] !== digit) {
                renderBatch.push({
                  container: currentDigits[index],
                  digit: digit,
                  index: index,
                  total: newDigits.length
                });
              }
            });
            
            // ãƒãƒƒãƒå‡¦ç†ã§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
            if (renderBatch.length > 0) {
              requestAnimationFrame(() => {
                renderBatch.forEach(item => {
                  animateDigitChange(item.container, item.digit, item.index, item.total);
                });
              });
            }
          } else {
            // æ¡æ•°å¤‰æ›´æ™‚ã®æœ€é©åŒ–ã•ã‚ŒãŸå†æ§‹ç¯‰
            requestAnimationFrame(() => {
              el.style.opacity = '0.3';
              el.style.transform = 'scale(0.95)';
              
              setTimeout(() => {
                // å¤ã„è¦ç´ ã‚’ãƒ—ãƒ¼ãƒ«ã«æˆ»ã™
                Array.from(el.children).forEach(child => {
                  returnDigitElement(child);
                });
                
                el.innerHTML = '';
                const digitElements = createDigitElements(localizedSecs);
                const fragment = document.createDocumentFragment();
                digitElements.forEach(element => fragment.appendChild(element));
                el.appendChild(fragment);
                
                el.style.opacity = '1';
                el.style.transform = 'scale(1)';
                
                setTimeout(() => enhance3DEffects(), 100);
              }, 300);
            });
          }
        } else if (previousSeconds === null) {
          // åˆå›è¡¨ç¤ºã®æœ€é©åŒ–
          requestAnimationFrame(() => {
            el.innerHTML = '';
            const digitElements = createDigitElements(localizedSecs);
            const fragment = document.createDocumentFragment();
            
            digitElements.forEach((element, index) => {
              element.style.opacity = '0';
              element.style.transform = 'translateY(30px) rotateX(90deg)';
              fragment.appendChild(element);
              
              setTimeout(() => {
                element.style.transition = 'all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
                element.style.opacity = '1';
                element.style.transform = 'translateY(0) rotateX(0deg)';
              }, index * 100);
            });
            
            el.appendChild(fragment);
            
            // 3DåŠ¹æœã‚’é©ç”¨
            setTimeout(() => enhance3DEffects(), 1000);
          });
        }
        
        previousSeconds = secs;
        lastRenderedSeconds = secs; // æœ€é©åŒ–: ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ•ãƒ©ã‚°æ›´æ–°
        
        if (diffMs === 0) {
          clearInterval(timer);
          // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³çµ‚äº†æ™‚ã®ç‰¹åˆ¥ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
          requestAnimationFrame(() => {
            triggerCountdownFinishEffect();
          });
        }
      }
      
      // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³çµ‚äº†æ™‚ã®å£®å¤§ãªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
      function triggerCountdownFinishEffect() {
        // ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        el.style.animation = 'glow 0.3s ease-in-out infinite alternate, party 1.5s ease-in-out infinite';
        
        // å„æ¡ã«å€‹åˆ¥ã®çˆ†ç™ºã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        const containers = el.querySelectorAll('.digit-container');
        containers.forEach((container, index) => {
          setTimeout(() => {
            container.style.animation = 'digitExplosion 2s ease-out infinite';
            
            // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            createParticleExplosion(container);
          }, index * 200);
        });
        
        // èƒŒæ™¯ã®è‰²å½©å¤‰åŒ–
        document.body.style.animation = 'finalCountdown 3s ease-in-out infinite';
        
        // éŸ³æ¥½ãŒå†ç”Ÿä¸­ã®å ´åˆã€ç‰¹åˆ¥ãªçµ‚äº†ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ã‚’è¿½åŠ 
        if (isPlaying && instrumentSynth) {
          playVictoryMelody();
        }
      }
      
      // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«çˆ†ç™ºã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
      function createParticleExplosion(centerElement) {
        const rect = centerElement.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        const particles = ['âœ¨', 'ğŸ‰', 'ğŸŠ', 'ğŸ’«', 'â­', 'ğŸŒŸ'];
        const colors = ['#ffd700', '#ff69b4', '#ff6347', '#00ffff', '#98fb98'];
        
        for (let i = 0; i < 12; i++) {
          const particle = document.createElement('div');
          particle.textContent = particles[Math.floor(Math.random() * particles.length)];
          particle.style.cssText = `
            position: fixed;
            left: ${centerX}px;
            top: ${centerY}px;
            font-size: 20px;
            pointer-events: none;
            z-index: 1000;
            color: ${colors[Math.floor(Math.random() * colors.length)]};
            animation: particleExplode 2s ease-out forwards;
            animation-delay: ${Math.random() * 0.5}s;
          `;
          
          const angle = (i / 12) * Math.PI * 2;
          const distance = 100 + Math.random() * 100;
          const endX = centerX + Math.cos(angle) * distance;
          const endY = centerY + Math.sin(angle) * distance - 50;
          
          particle.style.setProperty('--end-x', endX + 'px');
          particle.style.setProperty('--end-y', endY + 'px');
          
          document.body.appendChild(particle);
          
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }, 2500);
        }
      }
      
      // å‹åˆ©ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ã®æ¼”å¥
      function playVictoryMelody() {
        if (!audioContext || !instrumentSynth) return;
        
        // å‹åˆ©ã®ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãƒ©ãƒ¼ã‚¬ãƒ™ãƒ¼ã‚¹ã®ç¥ç¥­éŸ³æ¥½ï¼‰
        const victoryMelody = [
          { note: 0, time: 0, duration: 0.5 },    // Sa
          { note: 2, time: 0.3, duration: 0.5 },  // Ga
          { note: 4, time: 0.6, duration: 0.5 },  // Pa
          { note: 7, time: 0.9, duration: 1.0 },  // Sa (é«˜)
          { note: 4, time: 1.5, duration: 0.5 },  // Pa
          { note: 2, time: 1.8, duration: 0.5 },  // Ga
          { note: 0, time: 2.1, duration: 1.5 },  // Sa (é•·)
        ];
        
        const startTime = audioContext.currentTime;
        
        victoryMelody.forEach(({ note, time, duration }) => {
          const frequency = ragaYaman.frequencies[note] * (note === 7 ? 2 : 1); // ã‚ªã‚¯ã‚¿ãƒ¼ãƒ–èª¿æ•´
          instrumentSynth.createSitarSound(frequency, duration, startTime + time);
        });
      }
      }

      // éŸ³æ¥½é–¢é€£ã®è¨­å®š
      const musicControl = document.getElementById('musicControl');
      const volumeControl = document.getElementById('volumeControl');
      const volumeSlider = document.getElementById('volumeSlider');
      const musicIcon = document.getElementById('musicIcon');
      const musicText = document.getElementById('musicText');
      
      let isPlaying = false;
      let showingVolumeControl = false;
      
      // é«˜å“è³ªã‚¤ãƒ³ãƒ‰éŸ³æ¥½ç”Ÿæˆã‚·ã‚¹ãƒ†ãƒ 
      let audioContext;
      let masterGain;
      let melodyGain;
      let droneGain;
      let tablaGain;
      
      // ãƒ©ãƒ¼ã‚¬ã€Œãƒ¤ãƒãƒ³ã€ã®éŸ³éšï¼ˆã‚¤ãƒ³ãƒ‰ã‚¯ãƒ©ã‚·ãƒƒã‚¯éŸ³æ¥½ï¼‰
      const ragaYaman = {
        // Sa Re Ga Ma Pa Dha Ni Saï¼ˆãƒ‰ãƒ¬ãƒŸãƒ•ã‚¡ã‚½ãƒ©ã‚·ãƒ‰ç›¸å½“ï¼‰
        frequencies: [261.63, 293.66, 329.63, 369.99, 392.00, 440.00, 493.88, 523.25],
        name: 'ãƒ¤ãƒãƒ³',
        mood: 'å¤œã®é™ã‘ã•ã¨ç‘æƒ³'
      };
      
      // ã‚¤ãƒ³ãƒ‰ã®æ¥½å™¨ã‚µã‚¦ãƒ³ãƒ‰ç”Ÿæˆ
      class IndianInstrumentSynthesizer {
        constructor(context, gain) {
          this.context = context;
          this.masterGain = gain;
          this.activeOscillators = new Set();
          
          // ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒãƒ¼ãƒ‰ãƒ—ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ 
          this.nodePool = {
            oscillators: [],
            gainNodes: [],
            filters: [],
            maxPoolSize: 10
          };
          
          // ãƒ—ãƒ¼ãƒ«åˆæœŸåŒ–
          this.initializePool();
        }
        
        initializePool() {
          // ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒãƒ¼ãƒ‰ã‚’äº‹å‰ã«ä½œæˆã—ã¦ãƒ—ãƒ¼ãƒ«ã«ä¿å­˜
          for (let i = 0; i < this.nodePool.maxPoolSize; i++) {
            this.nodePool.oscillators.push(this.context.createOscillator());
            this.nodePool.gainNodes.push(this.context.createGain());
            this.nodePool.filters.push(this.context.createBiquadFilter());
          }
        }
        
        getPooledOscillator() {
          if (this.nodePool.oscillators.length > 0) {
            return this.nodePool.oscillators.pop();
          }
          return this.context.createOscillator();
        }
        
        getPooledGainNode() {
          if (this.nodePool.gainNodes.length > 0) {
            return this.nodePool.gainNodes.pop();
          }
          return this.context.createGain();
        }
        
        getPooledFilter() {
          if (this.nodePool.filters.length > 0) {
            return this.nodePool.filters.pop();
          }
          return this.context.createBiquadFilter();
        }
        
        returnToPool(oscillator, gainNode, filter) {
          // ãƒãƒ¼ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦ãƒ—ãƒ¼ãƒ«ã«æˆ»ã™ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯åˆ¶é™ã‚ã‚Šï¼‰
          try {
            oscillator.stop(0);
            oscillator.disconnect();
            
            if (this.nodePool.oscillators.length < this.nodePool.maxPoolSize) {
              oscillator = this.context.createOscillator(); // æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå¿…è¦
              this.nodePool.oscillators.push(oscillator);
            }
            
            if (gainNode && this.nodePool.gainNodes.length < this.nodePool.maxPoolSize) {
              gainNode.disconnect();
              gainNode.gain.value = 1;
              this.nodePool.gainNodes.push(gainNode);
            }
            
            if (filter && this.nodePool.filters.length < this.nodePool.maxPoolSize) {
              filter.disconnect();
              filter.frequency.value = 350;
              filter.Q.value = 1;
              this.nodePool.filters.push(filter);
            }
          } catch (e) {
            // ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ã¯stopå¾Œã«å†åˆ©ç”¨ã§ããªã„ãŸã‚ã€æ–°ã—ã„ã‚‚ã®ã‚’ä½œæˆ
          }
        }
        
        // ã‚·ã‚¿ãƒ¼ãƒ«é¢¨ã®éŸ³è‰²ç”Ÿæˆï¼ˆæœ€é©åŒ–ç‰ˆï¼‰
        createSitarSound(frequency, duration, startTime) {
          const oscillator = this.getPooledOscillator();
          const gainNode = this.getPooledGainNode();
          const filter = this.getPooledFilter();
          
          // ã‚·ã‚¿ãƒ¼ãƒ«ç‰¹æœ‰ã®éŸ³è‰²è¨­å®š
          oscillator.type = 'sawtooth';
          oscillator.frequency.setValueAtTime(frequency, startTime);
          
          // å¾®ç´°ãªéŸ³ç¨‹å¤‰åŒ–ã§ã‚·ã‚¿ãƒ¼ãƒ«ã®ç‰¹å¾´ã‚’å†ç¾
          oscillator.frequency.exponentialRampToValueAtTime(
            frequency * 1.05, startTime + 0.1
          );
          oscillator.frequency.exponentialRampToValueAtTime(
            frequency, startTime + 0.3
          );
          
          // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š
          filter.type = 'lowpass';
          filter.frequency.setValueAtTime(1200, startTime);
          filter.Q.setValueAtTime(8, startTime);
          
          // ã‚¨ãƒ³ãƒ™ãƒ­ãƒ¼ãƒ—è¨­å®š
          gainNode.gain.setValueAtTime(0, startTime);
          gainNode.gain.linearRampToValueAtTime(0.15 * volumeSlider.value, startTime + 0.05);
          gainNode.gain.exponentialRampToValueAtTime(0.08 * volumeSlider.value, startTime + 0.3);
          gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + duration);
          
          // æ¥ç¶š
          oscillator.connect(filter);
          filter.connect(gainNode);
          gainNode.connect(this.masterGain);
          
          oscillator.start(startTime);
          oscillator.stop(startTime + duration);
          
          this.activeOscillators.add(oscillator);
          oscillator.onended = () => {
            this.activeOscillators.delete(oscillator);
            // ä½¿ç”¨æ¸ˆã¿ãƒãƒ¼ãƒ‰ã‚’ãƒ—ãƒ¼ãƒ«ã«æˆ»ã™ï¼ˆæ–°ã—ã„ã‚ªã‚·ãƒ¬ãƒ¼ã‚¿ãŒå¿…è¦ï¼‰
            setTimeout(() => {
              this.returnToPool(oscillator, gainNode, filter);
            }, 100);
          };
          
          return oscillator;
        }
        
        // ã‚¿ãƒ³ãƒ—ãƒ¼ãƒ©ï¼ˆãƒ‰ãƒ­ãƒ¼ãƒ³ï¼‰ç”Ÿæˆ
        createTanpuraSound() {
          const fundamentals = [ragaYaman.frequencies[0], ragaYaman.frequencies[4]]; // Sa, Pa
          
          fundamentals.forEach(freq => {
            const oscillator = this.context.createOscillator();
            const gainNode = this.context.createGain();
            
            oscillator.type = 'sawtooth';
            oscillator.frequency.setValueAtTime(freq, this.context.currentTime);
            
            gainNode.gain.setValueAtTime(0.08 * volumeSlider.value, this.context.currentTime);
            
            oscillator.connect(gainNode);
            gainNode.connect(droneGain);
            
            oscillator.start();
            this.activeOscillators.add(oscillator);
            
            // éŸ³ç¨‹ã‚’å¾®èª¿æ•´ã—ã¦ã‚¿ãƒ³ãƒ—ãƒ¼ãƒ©ã®éŸ¿ãã‚’å†ç¾
            setInterval(() => {
              if (this.activeOscillators.has(oscillator) && isPlaying) {
                const variation = 1 + (Math.sin(Date.now() / 5000) * 0.002);
                oscillator.frequency.setValueAtTime(
                  freq * variation, this.context.currentTime
                );
              }
            }, 100);
          });
        }
        
        // ã‚¿ãƒ–ãƒ©é¢¨ãƒ‘ãƒ¼ã‚«ãƒƒã‚·ãƒ§ãƒ³
        createTablaSound(startTime) {
          // ãƒ‰ãƒ©ãƒ éŸ³ã®ç”Ÿæˆ
          const oscillator = this.context.createOscillator();
          const gainNode = this.context.createGain();
          const filter = this.context.createBiquadFilter();
          
          oscillator.type = 'sine';
          oscillator.frequency.setValueAtTime(80, startTime);
          oscillator.frequency.exponentialRampToValueAtTime(40, startTime + 0.1);
          
          filter.type = 'lowpass';
          filter.frequency.setValueAtTime(300, startTime);
          
          gainNode.gain.setValueAtTime(0.3 * volumeSlider.value, startTime);
          gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + 0.3);
          
          oscillator.connect(filter);
          filter.connect(gainNode);
          gainNode.connect(tablaGain);
          
          oscillator.start(startTime);
          oscillator.stop(startTime + 0.3);
          
          this.activeOscillators.add(oscillator);
          oscillator.onended = () => this.activeOscillators.delete(oscillator);
        }
        
        stopAll() {
          this.activeOscillators.forEach(osc => {
            try {
              osc.stop();
            } catch (e) {
              // æ—¢ã«åœæ­¢ã—ã¦ã„ã‚‹å ´åˆã®ã‚¨ãƒ©ãƒ¼ã‚’ç„¡è¦–
            }
          });
          this.activeOscillators.clear();
        }
      }
      
      let instrumentSynth;
      let melodyInterval;
      let tablaInterval;
      let currentMelodyIndex = 0;
      
      // ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãƒ©ãƒ¼ã‚¬ãƒ¤ãƒãƒ³ã®å…¸å‹çš„ãƒ•ãƒ¬ãƒ¼ã‚ºï¼‰
      const melodyPatterns = [
        [0, 2, 4, 2, 0], // Sa Ga Pa Ga Sa
        [4, 5, 6, 5, 4], // Pa Dha Ni Dha Pa
        [2, 4, 6, 7, 6, 4, 2], // Ga Pa Ni Sa Ni Pa Ga
        [0, 1, 2, 1, 0], // Sa Re Ga Re Sa
      ];
      
      // ã‚¿ãƒ–ãƒ©ã®ãƒªã‚ºãƒ ãƒ‘ã‚¿ãƒ¼ãƒ³
      const tablaPatterns = [
        [0, 0.5, 1, 1.5, 2, 2.5, 3, 3.5], // åŸºæœ¬çš„ãª8ãƒ“ãƒ¼ãƒˆ
        [0, 0.75, 1.5, 2.25, 3], // è¤‡é›‘ãªãƒªã‚ºãƒ 
      ];
      
      async function initializeAudioSystem() {
        try {
          // AudioContextã‚’åˆæœŸåŒ–
          const AudioContextClass = window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext;
          if (!AudioContextClass) {
            throw new Error('Web Audio API is not supported in this browser');
          }
          audioContext = new AudioContextClass();
          
          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å¾Œã«AudioContextã‚’å†é–‹
          if (audioContext.state === 'suspended') {
            try {
              await audioContext.resume();
            } catch (error) {
              console.warn('AudioContext resume failed:', error);
            }
          }
          
          // ã‚²ã‚¤ãƒ³ãƒãƒ¼ãƒ‰è¨­å®š
          masterGain = audioContext.createGain();
          melodyGain = audioContext.createGain();
          droneGain = audioContext.createGain();
          tablaGain = audioContext.createGain();
          
          masterGain.gain.setValueAtTime(0.7, audioContext.currentTime);
          melodyGain.gain.setValueAtTime(0.8, audioContext.currentTime);
          droneGain.gain.setValueAtTime(0.3, audioContext.currentTime);
          tablaGain.gain.setValueAtTime(0.6, audioContext.currentTime);
          
          // æ¥ç¶š
          melodyGain.connect(masterGain);
          droneGain.connect(masterGain);
          tablaGain.connect(masterGain);
          masterGain.connect(audioContext.destination);
          
          // ã‚·ãƒ³ã‚»ã‚µã‚¤ã‚¶ãƒ¼ã‚’åˆæœŸåŒ–
          instrumentSynth = new IndianInstrumentSynthesizer(audioContext, melodyGain);
          
          return true;
        } catch (error) {
          console.error('éŸ³æ¥½ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ã«å¤±æ•—:', error);
          return false;
        }
      }
      
      function startIndianMusic() {
        if (!audioContext || !instrumentSynth) return;
        
        // ã‚¿ãƒ³ãƒ—ãƒ¼ãƒ©ï¼ˆãƒ‰ãƒ­ãƒ¼ãƒ³ï¼‰é–‹å§‹
        instrumentSynth.createTanpuraSound();
        
        // ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼æ¼”å¥
        let patternIndex = 0;
        melodyInterval = setInterval(() => {
          if (!isPlaying) return;
          
          const pattern = melodyPatterns[patternIndex % melodyPatterns.length];
          const startTime = audioContext.currentTime;
          
          pattern.forEach((noteIndex, i) => {
            const frequency = ragaYaman.frequencies[noteIndex];
            const noteStartTime = startTime + (i * 0.8);
            const duration = 1.2;
            
            instrumentSynth.createSitarSound(frequency, duration, noteStartTime);
          });
          
          patternIndex++;
        }, 4000); // 4ç§’é–“éš”ã§ãƒ¡ãƒ­ãƒ‡ã‚£ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¤‰æ›´
        
        // ã‚¿ãƒ–ãƒ©æ¼”å¥
        let tablaPatternIndex = 0;
        tablaInterval = setInterval(() => {
          if (!isPlaying) return;
          
          const pattern = tablaPatterns[tablaPatternIndex % tablaPatterns.length];
          const startTime = audioContext.currentTime;
          
          pattern.forEach(timing => {
            instrumentSynth.createTablaSound(startTime + timing);
          });
          
          tablaPatternIndex++;
        }, 4000); // ã‚¿ãƒ–ãƒ©ã‚‚4ç§’é–“éš”
      }
      
      function stopIndianMusic() {
        if (instrumentSynth) {
          instrumentSynth.stopAll();
        }
        
        if (melodyInterval) {
          clearInterval(melodyInterval);
          melodyInterval = null;
        }
        
        if (tablaInterval) {
          clearInterval(tablaInterval);
          tablaInterval = null;
        }
      }
      
      async function toggleMusic() {
        // æ—¢ã«å‡¦ç†ä¸­ã®å ´åˆã¯ç„¡è¦–
        if (musicControl.classList.contains('loading')) {
          return;
        }
        
        isPlaying = !isPlaying;
        
        if (isPlaying) {
          try {
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã«è¨­å®š
            musicControl.classList.add('loading');
            musicIcon.textContent = 'â³';
            musicText.textContent = 'éŸ³æ¥½ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–ä¸­...';
            
            // AudioContextã®åˆæœŸåŒ–
            const initialized = await initializeAudioSystem();
            
            if (initialized) {
              startIndianMusic();
              musicIcon.textContent = 'ğŸ¼';
              const lang = languages[currentLang];
              musicText.textContent = lang.music + ' (ãƒ—ãƒ¬ãƒŸã‚¢ãƒ )';
              musicControl.classList.remove('loading');
              musicControl.classList.add('playing');
              createFloatingNotes();
              
              // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸€æ™‚è¡¨ç¤º
              showMusicStatus('ğŸµ éŸ³æ¥½é–‹å§‹ - ãƒ©ãƒ¼ã‚¬ãƒ¤ãƒãƒ³æ¼”å¥ä¸­', 'success');
            } else {
              throw new Error('éŸ³æ¥½ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ã«å¤±æ•—');
            }
          } catch (error) {
            console.error('éŸ³æ¥½å†ç”Ÿã‚¨ãƒ©ãƒ¼:', error);
            isPlaying = false;
            musicControl.classList.remove('loading');
            musicControl.classList.add('error');
            musicIcon.textContent = 'âŒ';
            musicText.textContent = 'éŸ³æ¥½ã‚¨ãƒ©ãƒ¼';
            
            showMusicStatus('ğŸš« éŸ³æ¥½å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ\nãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„', 'error');
            
            // ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ã‚’3ç§’å¾Œã«ãƒªã‚»ãƒƒãƒˆ
            setTimeout(() => {
              musicControl.classList.remove('error');
              musicIcon.textContent = 'ğŸµ';
              const lang = languages[currentLang];
              musicText.textContent = lang.music;
            }, 3000);
          }
        } else {
          stopIndianMusic();
          musicIcon.textContent = 'ğŸµ';
          const lang = languages[currentLang];
          musicText.textContent = lang.music;
          musicControl.classList.remove('playing', 'loading', 'error');
          clearInterval(noteInterval);
          
          showMusicStatus('ğŸ”‡ éŸ³æ¥½åœæ­¢', 'info');
        }
      }
      
      // éŸ³æ¥½ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºæ©Ÿèƒ½
      function showMusicStatus(message, type) {
        const statusDiv = document.createElement('div');
        statusDiv.textContent = message;
        statusDiv.style.cssText = `
          position: fixed;
          top: 120px;
          right: 20px;
          padding: 10px 15px;
          border-radius: 25px;
          color: white;
          font-size: 12px;
          z-index: 1001;
          backdrop-filter: blur(10px);
          animation: fadeInDown 0.3s ease-out;
          max-width: 250px;
          text-align: center;
        `;
        
        // ã‚¿ã‚¤ãƒ—åˆ¥ã®ã‚¹ã‚¿ã‚¤ãƒ«
        switch (type) {
          case 'success':
            statusDiv.style.background = 'rgba(34, 197, 94, 0.8)';
            statusDiv.style.border = '2px solid rgba(34, 197, 94, 0.6)';
            break;
          case 'error':
            statusDiv.style.background = 'rgba(239, 68, 68, 0.8)';
            statusDiv.style.border = '2px solid rgba(239, 68, 68, 0.6)';
            break;
          case 'info':
            statusDiv.style.background = 'rgba(59, 130, 246, 0.8)';
            statusDiv.style.border = '2px solid rgba(59, 130, 246, 0.6)';
            break;
        }
        
        document.body.appendChild(statusDiv);
        
        // 3ç§’å¾Œã«è‡ªå‹•å‰Šé™¤
        setTimeout(() => {
          if (statusDiv.parentNode) {
            statusDiv.style.animation = 'fadeOutUp 0.3s ease-out';
            setTimeout(() => {
              statusDiv.parentNode.removeChild(statusDiv);
            }, 300);
          }
        }, 3000);
      }
      
      let noteInterval;
      function createFloatingNotes() {
        const notes = ['â™ª', 'â™«', 'â™¬', 'ğŸµ', 'ğŸ¶', 'ğŸ¼'];
        noteInterval = setInterval(() => {
          if (!isPlaying) return;
          
          const note = document.createElement('div');
          note.className = 'floating-notes';
          note.textContent = notes[Math.floor(Math.random() * notes.length)];
          note.style.left = Math.random() * window.innerWidth + 'px';
          note.style.top = window.innerHeight + 'px';
          note.style.animationDelay = Math.random() * 2 + 's';
          
          document.body.appendChild(note);
          
          setTimeout(() => {
            if (note.parentNode) {
              note.parentNode.removeChild(note);
            }
          }, 4000);
        }, 800);
      }
      
      function toggleVolumeControl() {
        showingVolumeControl = !showingVolumeControl;
        if (showingVolumeControl) {
          volumeControl.classList.add('show');
        } else {
          volumeControl.classList.remove('show');
        }
      }
      
      musicControl.addEventListener('click', toggleMusic);
      
      // å³ã‚¯ãƒªãƒƒã‚¯ã€é•·æŠ¼ã—ã§ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¡¨ç¤º
      musicControl.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        toggleVolumeControl();
      });
      
      // ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ: é•·æŠ¼ã—ã§ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
      let longPressTimer;
      musicControl.addEventListener('touchstart', (e) => {
        longPressTimer = setTimeout(() => {
          e.preventDefault();
          toggleVolumeControl();
          // è»½ã„æŒ¯å‹•ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ï¼‰
          if (navigator.vibrate) {
            navigator.vibrate(50);
          }
        }, 500);
      });
      
      musicControl.addEventListener('touchend', () => {
        if (longPressTimer) {
          clearTimeout(longPressTimer);
        }
      });
      
      musicControl.addEventListener('touchmove', () => {
        if (longPressTimer) {
          clearTimeout(longPressTimer);
        }
      });
      
      // ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«æ”¹å–„
      const volumeValue = document.getElementById('volumeValue');
      
      volumeSlider.addEventListener('input', (e) => {
        const volume = parseFloat(e.target.value);
        
        // ãƒœãƒªãƒ¥ãƒ¼ãƒ å€¤ã®è¡¨ç¤ºæ›´æ–°
        volumeValue.textContent = Math.round(volume * 100) + '%';
        
        // ãƒã‚¹ã‚¿ãƒ¼ãƒœãƒªãƒ¥ãƒ¼ãƒ èª¿æ•´
        if (masterGain) {
          masterGain.gain.setValueAtTime(0.7 * volume, audioContext.currentTime);
        }
        
        // ç¾åœ¨å†ç”Ÿä¸­ã®éŸ³é‡ã‚‚å³åº§ã«èª¿æ•´
        if (melodyGain) {
          melodyGain.gain.setValueAtTime(0.8 * volume, audioContext.currentTime);
        }
        if (droneGain) {
          droneGain.gain.setValueAtTime(0.3 * volume, audioContext.currentTime);
        }
        if (tablaGain) {
          tablaGain.gain.setValueAtTime(0.6 * volume, audioContext.currentTime);
        }
      });
      
      // ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
      volumeSlider.addEventListener('mousemove', (e) => {
        if (e.buttons === 1) { // ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®ã¿
          const volume = parseFloat(e.target.value);
          showMusicStatus(`ğŸ”Š éŸ³é‡: ${Math.round(volume * 100)}%`, 'info');
        }
      });
      
      // è¨€èªé¸æŠé–¢é€£ã®è¨­å®š
      const languageSelector = document.getElementById('languageSelector');
      const languageDropdown = document.getElementById('languageDropdown');
      const languageGrid = document.getElementById('languageGrid');
      let showingLanguageDropdown = false;
      
      // è¨€èªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å‹•çš„ç”Ÿæˆ
      function populateLanguageOptions() {
        languageGrid.innerHTML = '';
        Object.entries(languages).forEach(([code, lang]) => {
          const option = document.createElement('div');
          option.className = 'language-option';
          option.innerHTML = `${lang.flag} ${lang.name}`;
          option.dataset.lang = code;
          
          if (code === currentLang) {
            option.classList.add('active');
          }
          
          option.addEventListener('click', () => {
            // å‰ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚’å‰Šé™¤
            document.querySelector('.language-option.active')?.classList.remove('active');
            option.classList.add('active');
            
            // è¨€èªå¤‰æ›´
            currentLang = code;
            updateLanguageDisplay();
            
            // ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’é–‰ã˜ã‚‹
            toggleLanguageDropdown();
            
            // æ•°å­—è¡¨ç¤ºã‚’æ›´æ–°
            previousSeconds = null;
            render();
          });
          
          languageGrid.appendChild(option);
        });
      }
      
      function toggleLanguageDropdown() {
        showingLanguageDropdown = !showingLanguageDropdown;
        if (showingLanguageDropdown) {
          languageDropdown.classList.add('show');
          populateLanguageOptions();
        } else {
          languageDropdown.classList.remove('show');
        }
      }
      
      languageSelector.addEventListener('click', toggleLanguageDropdown);
      
      // å¤–éƒ¨ã‚¯ãƒªãƒƒã‚¯ã§ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’é–‰ã˜ã‚‹
      document.addEventListener('click', (e) => {
        if (!languageSelector.contains(e.target) && !languageDropdown.contains(e.target)) {
          if (showingLanguageDropdown) {
            toggleLanguageDropdown();
          }
        }
        if (!musicControl.contains(e.target) && !volumeControl.contains(e.target)) {
          if (showingVolumeControl) {
            toggleVolumeControl();
          }
        }
      });
      
      // ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•å†ç”Ÿãƒãƒªã‚·ãƒ¼ã«å¯¾å¿œã—ãŸã‚¹ãƒãƒ¼ãƒˆãªéŸ³æ¥½é–‹å§‹
      let userHasInteracted = false;
      
      function handleFirstUserInteraction() {
        userHasInteracted = true;
        
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«éŸ³æ¥½å†ç”Ÿã®è¨±å¯ã‚’æ±‚ã‚ã‚‹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’è¡¨ç¤º
        if (!isPlaying) {
          showMusicPrompt();
        }
      }
      
      function showMusicPrompt() {
        const promptDiv = document.createElement('div');
        promptDiv.innerHTML = `
          <div style="
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(15, 23, 42, 0.95);
            border: 2px solid rgba(255, 215, 0, 0.8);
            border-radius: 20px;
            padding: 25px 30px;
            text-align: center;
            color: #e5e7eb;
            backdrop-filter: blur(15px);
            z-index: 1002;
            max-width: 350px;
            animation: fadeInDown 0.5s ease-out;
          ">
            <div style="font-size: 24px; margin-bottom: 15px;">ğŸµ</div>
            <div style="font-size: 16px; margin-bottom: 20px; line-height: 1.4;">ç¾ã—ã„ã‚¤ãƒ³ãƒ‰å¤å…¸éŸ³æ¥½ã§ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„</div>
            <div style="display: flex; gap: 15px; justify-content: center;">
              <button id="playMusicBtn" style="
                background: rgba(34, 197, 94, 0.8);
                border: 2px solid rgba(34, 197, 94, 0.6);
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                cursor: pointer;
                font-size: 14px;
                transition: all 0.3s ease;
              ">ğŸ¼ å†ç”Ÿã™ã‚‹</button>
              <button id="skipMusicBtn" style="
                background: rgba(75, 85, 99, 0.8);
                border: 2px solid rgba(75, 85, 99, 0.6);
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                cursor: pointer;
                font-size: 14px;
                transition: all 0.3s ease;
              ">ç„¡éŸ³ã§ç¶šè¡Œ</button>
            </div>
            <div style="font-size: 12px; margin-top: 15px; opacity: 0.7;">ã‚¹ãƒšãƒ¼ã‚¹/Mã‚­ãƒ¼ã§ã„ã¤ã§ã‚‚åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ | Hã‚­ãƒ¼ã§ãƒ˜ãƒ«ãƒ—</div>
          </div>
        `;
        
        document.body.appendChild(promptDiv);
        
        // ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        document.getElementById('playMusicBtn').addEventListener('click', () => {
          document.body.removeChild(promptDiv);
          toggleMusic();
        });
        
        document.getElementById('skipMusicBtn').addEventListener('click', () => {
          document.body.removeChild(promptDiv);
          showMusicStatus('ç„¡éŸ³ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠã—ã¾ã—ãŸ', 'info');
        });
        
        // 10ç§’å¾Œã«è‡ªå‹•ã§é–‰ã˜ã‚‹
        setTimeout(() => {
          if (promptDiv.parentNode) {
            document.body.removeChild(promptDiv);
            showMusicStatus('éŸ³æ¥½ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¯å³ä¸Šã‹ã‚‰åˆ©ç”¨ã§ãã¾ã™', 'info');
          }
        }, 10000);
        
        // ESCã‚­ãƒ¼ã§ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é–‰ã˜ã‚‹
        const closeOnEsc = (e) => {
          if (e.key === 'Escape' && promptDiv.parentNode) {
            document.body.removeChild(promptDiv);
            document.removeEventListener('keydown', closeOnEsc);
          }
        };
        document.addEventListener('keydown', closeOnEsc);
      }
      
      // å„ç¨®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç›£è¦–
      ['click', 'keydown', 'touchstart'].forEach(event => {
        document.addEventListener(event, handleFirstUserInteraction, { once: true });
      });
      
      // éš ã—ã‚¤ãƒ¼ã‚¹ã‚¿ãƒ¼ã‚¨ãƒƒã‚°: ã‚³ãƒŠãƒŸã‚³ãƒãƒ³ãƒ‰
      let konamiCode = [];
      const konamiSequence = [
        'ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown',
        'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight',
        'KeyB', 'KeyA'
      ];
      
      document.addEventListener('keydown', (e) => {
        konamiCode.push(e.code);
        if (konamiCode.length > konamiSequence.length) {
          konamiCode.shift();
        }
        
        if (konamiCode.length === konamiSequence.length &&
            konamiCode.every((code, index) => code === konamiSequence[index])) {
          // ã‚³ãƒŠãƒŸã‚³ãƒãƒ³ãƒ‰æˆåŠŸï¼
          el.classList.add('konami-mode');
          
          // 5ç§’å¾Œã«å…ƒã«æˆ»ã™
          setTimeout(() => {
            el.classList.remove('konami-mode');
          }, 5000);
          
          // ç‰¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸€æ™‚çš„ã«è¡¨ç¤º
          const originalTop = document.querySelector('.label-top').textContent;
          const originalBottom = document.querySelector('.label-bottom').textContent;
          
          document.querySelector('.label-top').textContent = 'ğŸ‰ SECRET UNLOCKED! ğŸ‰';
          document.querySelector('.label-bottom').textContent = 'Ultimate countdown mode activated!';
          
          setTimeout(() => {
            document.querySelector('.label-top').textContent = originalTop;
            document.querySelector('.label-bottom').textContent = originalBottom;
          }, 3000);
          
          konamiCode = [];
        }
      });
      
      // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå¼·åŒ–
      document.addEventListener('keydown', (e) => {
        // ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§éŸ³æ¥½ãƒˆã‚°ãƒ«ï¼ˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ãªã„å ´åˆã®ã¿ï¼‰
        if (e.code === 'Space' && !e.ctrlKey && !e.altKey && !e.metaKey) {
          const activeElement = document.activeElement;
          if (activeElement.tagName !== 'INPUT' && activeElement.tagName !== 'TEXTAREA') {
            e.preventDefault();
            toggleMusic();
          }
        }
        
        // M ã‚­ãƒ¼ã§éŸ³æ¥½ãƒˆã‚°ãƒ«
        if (e.code === 'KeyM' && !e.ctrlKey && !e.altKey && !e.metaKey) {
          e.preventDefault();
          toggleMusic();
        }
        
        // V ã‚­ãƒ¼ã§ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¡¨ç¤º/éè¡¨ç¤º
        if (e.code === 'KeyV' && !e.ctrlKey && !e.altKey && !e.metaKey) {
          e.preventDefault();
          toggleVolumeControl();
        }
        
        // æ•°å­—ã‚­ãƒ¼1-9ã§ãƒœãƒªãƒ¥ãƒ¼ãƒ èª¿æ•´
        if (e.code.startsWith('Digit') && !e.ctrlKey && !e.altKey && !e.metaKey) {
          const digit = parseInt(e.code.replace('Digit', ''));
          if (digit >= 1 && digit <= 9) {
            e.preventDefault();
            const volume = digit / 10;
            volumeSlider.value = volume;
            volumeValue.textContent = Math.round(volume * 100) + '%';
            
            // éŸ³é‡é©ç”¨
            if (masterGain) {
              masterGain.gain.setValueAtTime(0.7 * volume, audioContext.currentTime);
            }
            if (melodyGain) {
              melodyGain.gain.setValueAtTime(0.8 * volume, audioContext.currentTime);
            }
            if (droneGain) {
              droneGain.gain.setValueAtTime(0.3 * volume, audioContext.currentTime);
            }
            if (tablaGain) {
              tablaGain.gain.setValueAtTime(0.6 * volume, audioContext.currentTime);
            }
            
            showMusicStatus(`ğŸšï¸ éŸ³é‡: ${Math.round(volume * 100)}% (${digit}ã‚­ãƒ¼)`, 'info');
          }
        }
      });
      
      // ãƒ˜ãƒ«ãƒ—æ©Ÿèƒ½ï¼ˆH ã‚­ãƒ¼ï¼‰ã¨ãƒ›ãƒ­ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆRã‚­ãƒ¼ï¼‰
      document.addEventListener('keydown', (e) => {
        if (e.code === 'KeyH' && !e.ctrlKey && !e.altKey && !e.metaKey) {
          e.preventDefault();
          showHelpDialog();
        }
        
        // Rã‚­ãƒ¼ã§ãƒ›ãƒ­ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆ
        if (e.code === 'KeyR' && !e.ctrlKey && !e.altKey && !e.metaKey) {
          e.preventDefault();
          toggleHolographicMode();
        }
      });
      
      function showHelpDialog() {
        const helpDiv = document.createElement('div');
        helpDiv.innerHTML = `
          <div style="
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(15, 23, 42, 0.95);
            border: 2px solid rgba(138, 43, 226, 0.8);
            border-radius: 20px;
            padding: 25px;
            color: #e5e7eb;
            backdrop-filter: blur(15px);
            z-index: 1003;
            max-width: 400px;
            animation: fadeInDown 0.5s ease-out;
          ">
            <div style="text-align: center; font-size: 20px; margin-bottom: 20px;">âŒ¨ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</div>
            <div style="display: grid; grid-template-columns: auto 1fr; gap: 10px 20px; font-size: 14px; line-height: 1.6;">
              <strong>ã‚¹ãƒšãƒ¼ã‚¹ / M</strong><span>éŸ³æ¥½ å†ç”Ÿ/åœæ­¢</span>
              <strong>V</strong><span>ãƒœãƒªãƒ¥ãƒ¼ãƒ èª¿æ•´</span>
              <strong>1-9</strong><span>éŸ³é‡ã‚’10%-90%ã«è¨­å®š</span>
              <strong>R</strong><span>ãƒ›ãƒ­ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰</span>
              <strong>H</strong><span>ã“ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º</span>
              <strong>ESC</strong><span>ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‰ã˜ã‚‹</span>
              <strong>â†‘â†‘â†“â†“â†â†’â†â†’BA</strong><span>ç§˜å¯†ãƒ¢ãƒ¼ãƒ‰</span>
            </div>
            <div style="text-align: center; margin-top: 20px;">
              <button onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode)" style="
                background: rgba(138, 43, 226, 0.8);
                border: 2px solid rgba(138, 43, 226, 0.6);
                color: white;
                padding: 8px 16px;
                border-radius: 20px;
                cursor: pointer;
                font-size: 12px;
              ">é–‰ã˜ã‚‹</button>
            </div>
          </div>
        `;
        
        document.body.appendChild(helpDiv);
        
        // ESCã‚­ãƒ¼ã§é–‰ã˜ã‚‹
        const closeOnEsc = (e) => {
          if (e.key === 'Escape' && helpDiv.parentNode) {
            document.body.removeChild(helpDiv);
            document.removeEventListener('keydown', closeOnEsc);
          }
        };
        document.addEventListener('keydown', closeOnEsc);
        
        // 10ç§’å¾Œã«è‡ªå‹•ã§é–‰ã˜ã‚‹
        setTimeout(() => {
          if (helpDiv.parentNode) {
            document.body.removeChild(helpDiv);
            document.removeEventListener('keydown', closeOnEsc);
          }
        }, 10000);
      }
      
      // ãƒ›ãƒ«ã‚³ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡ã‚Šæ›¿ãˆ
      function toggleHolographicMode() {
        el.classList.toggle('holographic');
        if (el.classList.contains('holographic')) {
          showMusicStatus('ğŸŒˆ ãƒ›ãƒ­ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ ON', 'info');
        } else {
          showMusicStatus('ğŸŒˆ ãƒ›ãƒ­ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ OFF', 'info');
        }
      }
      
      // ãƒ›ãƒãƒ¼æ™‚ã®å¾®ç´°ãªãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«åŠ¹æœ
      function createHoverParticles(element) {
        const rect = element.getBoundingClientRect();
        const particles = ['âœ¨', 'â­', 'ğŸ’«'];
        
        for (let i = 0; i < 3; i++) {
          const particle = document.createElement('div');
          particle.textContent = particles[Math.floor(Math.random() * particles.length)];
          particle.style.cssText = `
            position: fixed;
            left: ${rect.left + Math.random() * rect.width}px;
            top: ${rect.top + Math.random() * rect.height}px;
            font-size: 12px;
            pointer-events: none;
            z-index: 999;
            color: rgba(255, 215, 0, 0.8);
            animation: hoverParticle 1s ease-out forwards;
          `;
          
          document.body.appendChild(particle);
          
          setTimeout(() => {
            if (particle.parentNode) {
              particle.parentNode.removeChild(particle);
            }
          }, 1000);
        }
      }
      
      // åˆæœŸåŒ–ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼‰
      updateLanguageDisplay();
      render();
      
      // setIntervalã‚’requestAnimationFrameã§æœ€é©åŒ–ã—ãŸã‚¿ã‚¤ãƒãƒ¼
      let lastUpdateTime = 0;
      const UPDATE_INTERVAL = 1000; // 1ç§’
      
      function animationLoop(currentTime) {
        if (currentTime - lastUpdateTime >= UPDATE_INTERVAL) {
          render();
          lastUpdateTime = currentTime;
        }
        requestAnimationFrame(animationLoop);
      }
      
      requestAnimationFrame(animationLoop);
      
      // åˆæœŸãƒœãƒªãƒ¥ãƒ¼ãƒ è¡¨ç¤ºã‚’è¨­å®š
      volumeValue.textContent = Math.round(volumeSlider.value * 100) + '%';
      
      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      window.addEventListener('load', () => {
        setTimeout(() => {
          showMusicStatus('ğŸ’¡ Hã‚­ãƒ¼ã§ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’ç¢ºèª', 'info');
        }, 2000);
      });
      
      // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã¨æœ€é©åŒ–
      if (typeof performance !== 'undefined') {
        const performanceMetrics = {
          loadTime: Math.round(performance.now()),
          audioSupport: !!(window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext),
          touchSupport: 'ontouchstart' in window,
          memoryUsage: performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + 'MB' : 'N/A',
          devicePixelRatio: window.devicePixelRatio || 1,
          hardwareConcurrency: navigator.hardwareConcurrency || 'N/A'
        };
        
        console.log('ğŸµ Indian Music Counter loaded successfully');
        console.log('ğŸ’» Performance:', performanceMetrics);
        
        // ä½ã‚¹ãƒšãƒƒã‚¯ãƒ‡ãƒã‚¤ã‚¹ã®æ¤œå‡º
        if (navigator.hardwareConcurrency && navigator.hardwareConcurrency <= 2) {
          console.log('ğŸ“± Low-spec device detected, enabling performance mode');
          document.body.classList.add('performance-mode');
        }
      }
    </script>
  </body>
</html>
