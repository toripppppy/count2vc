<!DOCTYPE html>
<html lang="hi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>‡§ï‡•â‡§≤ ‡§ï‡§æ‡§â‡§Ç‡§ü‡§°‡§æ‡§â‡§®</title>
    <style>
      :root {
        --fg: #e5e7eb;
        --sub: #94a3b8;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background: url("./bg.jpg") repeat;
        background-attachment: fixed;
        color: var(--fg);
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: system-ui, -apple-system, Segoe UI, Roboto,
          Noto Sans Devanagari, Noto Sans, Helvetica, Arial, "Apple Color Emoji",
          "Segoe UI Emoji";
        overflow: hidden;
      }
      .wrap {
        text-align: center;
        padding: 24px 32px;
        background: rgba(15, 23, 42, 0.7); /* ÂçäÈÄèÊòé„ÅÆËÉåÊôØ„ÅßÊñáÂ≠ó„ÇíË¶ã„ÇÑ„Åô„Åè */
        border-radius: 16px;
      }
      .label-top,
      .label-bottom {
        font-size: clamp(16px, 2.8vw, 24px);
        letter-spacing: 0.06em;
        color: var(--sub);
        margin: 12px 0;
      }
      .seconds {
        font-variant-numeric: tabular-nums;
        font-weight: 800;
        font-size: clamp(40px, 12vw, 160px);
        line-height: 1;
        position: relative;
        overflow: hidden;
        transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        text-shadow: 
          0 0 20px rgba(255, 215, 0, 0.8),
          0 0 40px rgba(255, 165, 0, 0.6),
          0 0 60px rgba(255, 105, 180, 0.4);
        animation: glow 2s ease-in-out infinite alternate;
      }
      
      @keyframes glow {
        from {
          text-shadow: 
            0 0 20px rgba(255, 215, 0, 0.8),
            0 0 40px rgba(255, 165, 0, 0.6),
            0 0 60px rgba(255, 105, 180, 0.4);
        }
        to {
          text-shadow: 
            0 0 30px rgba(255, 215, 0, 1),
            0 0 50px rgba(255, 165, 0, 0.8),
            0 0 70px rgba(255, 105, 180, 0.6);
        }
      }
      
      .seconds.changing {
        transform: scale(1.2) rotateY(360deg);
        filter: hue-rotate(180deg) saturate(2);
      }
      
      .digit-container {
        display: inline-block;
        position: relative;
        overflow: hidden;
        vertical-align: top;
      }
      
      .digit {
        display: inline-block;
        transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        position: relative;
      }
      
      .digit.flipping {
        transform: rotateX(90deg) scale(0.8);
      }
      
      .digit.new-digit {
        transform: rotateX(0deg) scale(1);
      }
      
      @keyframes party {
        0% { transform: scale(1) rotate(0deg); }
        25% { transform: scale(1.3) rotate(10deg); }
        50% { transform: scale(1.1) rotate(-10deg); }
        75% { transform: scale(1.4) rotate(5deg); }
        100% { transform: scale(1) rotate(0deg); }
      }
      
      .music-control {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(255, 215, 0, 0.2);
        border: 2px solid rgba(255, 215, 0, 0.5);
        border-radius: 50px;
        padding: 12px 20px;
        color: var(--fg);
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .music-control:hover {
        background: rgba(255, 215, 0, 0.4);
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
      }
      
      .music-control.playing {
        animation: musicPulse 1.5s ease-in-out infinite;
      }
      
      @keyframes musicPulse {
        0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.4); }
        50% { box-shadow: 0 0 25px rgba(255, 215, 0, 0.8); }
      }
      
      .volume-control {
        position: fixed;
        top: 80px;
        right: 20px;
        background: rgba(255, 215, 0, 0.2);
        border: 2px solid rgba(255, 215, 0, 0.5);
        border-radius: 20px;
        padding: 10px;
        backdrop-filter: blur(10px);
        display: none;
      }
      
      .volume-control.show {
        display: block;
        animation: fadeInDown 0.3s ease-out;
      }
      
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .volume-slider {
        width: 100px;
        height: 4px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        outline: none;
        appearance: none;
      }
      
      .volume-slider::-webkit-slider-thumb {
        appearance: none;
        width: 12px;
        height: 12px;
        background: #ffd700;
        border-radius: 50%;
        cursor: pointer;
      }
      
      .floating-notes {
        position: fixed;
        pointer-events: none;
        font-size: 24px;
        color: rgba(255, 215, 0, 0.7);
        animation: floatUp 4s ease-out infinite;
      }
      
      @keyframes floatUp {
        0% {
          opacity: 0;
          transform: translateY(0) rotate(0deg);
        }
        20% {
          opacity: 1;
        }
        80% {
          opacity: 0.8;
        }
        100% {
          opacity: 0;
          transform: translateY(-100vh) rotate(360deg);
        }
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
    </style>
  </head>
  <body>
    <div class="music-control" id="musicControl">
      <span id="musicIcon">üéµ</span>
      <span id="musicText">‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§ó‡•Ä‡§§</span>
    </div>
    
    <div class="volume-control" id="volumeControl">
      <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="0.5">
    </div>

    <main class="wrap" role="main" aria-live="polite">
      <div class="label-top">‡§™‡•ç‡§∞‡§ø‡§Ø ‡§Æ‡§ø‡§§‡•ç‡§∞, ‡§Ü‡§™‡§ï‡•á ‡§ï‡•â‡§≤ ‡§§‡§ï</div>
      <div id="seconds" class="seconds" aria-describedby="desc">‡•¶</div>
      <div class="label-bottom">‡§∏‡•á‡§ï‡§Ç‡§° ‡§π‡•à‡§Ç‡•§</div>
      <div id="desc" class="sr-only">
        2025Âπ¥8Êúà24Êó•21ÊôÇ00ÂàÜÔºàJSTÔºâ„Åæ„Åß„ÅÆÊÆã„ÇäÁßíÊï∞
      </div>
    </main>
    
    <audio id="bgMusic" loop>
      <source src="https://www.soundjay.com/misc/sounds/indian-flute-1.wav" type="audio/wav">
      <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTuR2fDKdy4FJm7A7uSXRgwJXrfn5qxZEwk/ltryxnkpBSl+zPLaizsHGW/E7+OWT" type="audio/wav">
    </audio>

    <script>
      const targetMs = new Date("2025-08-24T21:00:00+09:00").getTime();
      const el = document.getElementById("seconds");

      const devanagariDigits = [
        "‡•¶",
        "‡•ß",
        "‡•®",
        "‡•©",
        "‡•™",
        "‡•´",
        "‡•¨",
        "‡•≠",
        "‡•Æ",
        "‡•Ø",
      ];
      function toDevanagari(num) {
        return String(num)
          .split("")
          .map((d) => devanagariDigits[d] || d)
          .join("");
      }

      let previousSeconds = null;
      
      function addTransitionEffect() {
        el.classList.add('changing');
        setTimeout(() => {
          el.classList.remove('changing');
        }, 800);
      }
      
      function createDigitElements(digitStr) {
        return digitStr.split('').map(digit => {
          const container = document.createElement('span');
          container.className = 'digit-container';
          const digitSpan = document.createElement('span');
          digitSpan.className = 'digit';
          digitSpan.textContent = digit;
          container.appendChild(digitSpan);
          return container;
        });
      }
      
      function animateDigitChange(container, newDigit) {
        const digitSpan = container.querySelector('.digit');
        digitSpan.classList.add('flipping');
        
        setTimeout(() => {
          digitSpan.textContent = newDigit;
          digitSpan.classList.remove('flipping');
          digitSpan.classList.add('new-digit');
          
          setTimeout(() => {
            digitSpan.classList.remove('new-digit');
          }, 600);
        }, 300);
      }

      function render() {
        const now = Date.now();
        const diffMs = Math.max(0, targetMs - now);
        const secs = Math.floor(diffMs / 1000);
        const devanagariSecs = toDevanagari(secs);
        
        if (previousSeconds !== null && previousSeconds !== secs) {
          addTransitionEffect();
          
          // ÂêÑÊ°Å„ÅÆ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
          const currentDigits = el.querySelectorAll('.digit-container');
          const newDigits = devanagariSecs.split('');
          
          if (currentDigits.length === newDigits.length) {
            newDigits.forEach((digit, index) => {
              if (currentDigits[index]) {
                animateDigitChange(currentDigits[index], digit);
              }
            });
          } else {
            // Ê°ÅÊï∞„ÅåÂ§â„Çè„Å£„ÅüÂ†¥Âêà„ÅØÂÖ®‰Ωì„ÇíÂÜçÊßãÁØâ
            el.innerHTML = '';
            const digitElements = createDigitElements(devanagariSecs);
            digitElements.forEach(element => el.appendChild(element));
          }
        } else if (previousSeconds === null) {
          // ÂàùÂõûË°®Á§∫
          el.innerHTML = '';
          const digitElements = createDigitElements(devanagariSecs);
          digitElements.forEach(element => el.appendChild(element));
        }
        
        previousSeconds = secs;
        
        if (diffMs === 0) {
          clearInterval(timer);
          // „Ç´„Ç¶„É≥„Éà„ÉÄ„Ç¶„É≥ÁµÇ‰∫ÜÊôÇ„ÅÆÁâπÂà•„Ç®„Éï„Çß„ÇØ„Éà
          el.style.animation = 'glow 0.5s ease-in-out infinite alternate, party 2s ease-in-out infinite';
        }
      }

      // Èü≥Ê•ΩÈñ¢ÈÄ£„ÅÆË®≠ÂÆö
      const bgMusic = document.getElementById('bgMusic');
      const musicControl = document.getElementById('musicControl');
      const volumeControl = document.getElementById('volumeControl');
      const volumeSlider = document.getElementById('volumeSlider');
      const musicIcon = document.getElementById('musicIcon');
      const musicText = document.getElementById('musicText');
      
      let isPlaying = false;
      let showingVolumeControl = false;
      
      // „Ç§„É≥„Éâ„ÅÆ‰ºùÁµ±Èü≥Ê•Ω„ÅÆWeb Audio APIÁâàÔºà„Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÔºâ
      let audioContext;
      let oscillator;
      let gainNode;
      
      function createIndianMusic() {
        try {
          audioContext = new (window.AudioContext || window.webkitAudioContext)();
          
          // „É©„Éº„Ç¨„ÅÆ„Çà„ÅÜ„Å™Èü≥Èöé„ÇíÁîüÊàê
          const frequencies = [261.63, 293.66, 311.13, 349.23, 392.00, 415.30, 466.16, 523.25]; // C Indian scale
          let currentFreqIndex = 0;
          
          function playNote() {
            if (oscillator) {
              oscillator.stop();
            }
            
            oscillator = audioContext.createOscillator();
            gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(frequencies[currentFreqIndex], audioContext.currentTime);
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.1 * volumeSlider.value, audioContext.currentTime + 0.1);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 2);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 2);
            
            currentFreqIndex = (currentFreqIndex + 1) % frequencies.length;
            
            if (isPlaying) {
              setTimeout(playNote, 1500 + Math.random() * 1000);
            }
          }
          
          if (isPlaying) {
            playNote();
          }
        } catch (e) {
          console.log('Web Audio API„ÅåÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì');
        }
      }
      
      function toggleMusic() {
        isPlaying = !isPlaying;
        
        if (isPlaying) {
          // „Åæ„ÅöÈÄöÂ∏∏„ÅÆÈü≥Â£∞„Éï„Ç°„Ç§„É´„ÇíË©¶„Åô
          bgMusic.volume = volumeSlider.value;
          const playPromise = bgMusic.play();
          
          if (playPromise !== undefined) {
            playPromise.then(() => {
              musicIcon.textContent = 'üéº';
              musicText.textContent = '‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à';
              musicControl.classList.add('playing');
              createFloatingNotes();
            }).catch(() => {
              // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØ: Web Audio API„ÅßÈü≥Ê•ΩÁîüÊàê
              createIndianMusic();
              musicIcon.textContent = 'üé∂';
              musicText.textContent = '‡§∏‡§ø‡§Ç‡§•‡•á‡§ü‡§ø‡§ï ‡§∏‡§Ç‡§ó‡•Ä‡§§';
              musicControl.classList.add('playing');
              createFloatingNotes();
            });
          }
        } else {
          bgMusic.pause();
          if (oscillator) {
            oscillator.stop();
          }
          musicIcon.textContent = 'üéµ';
          musicText.textContent = '‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§ó‡•Ä‡§§';
          musicControl.classList.remove('playing');
          clearInterval(noteInterval);
        }
      }
      
      let noteInterval;
      function createFloatingNotes() {
        const notes = ['‚ô™', '‚ô´', '‚ô¨', 'üéµ', 'üé∂', 'üéº'];
        noteInterval = setInterval(() => {
          if (!isPlaying) return;
          
          const note = document.createElement('div');
          note.className = 'floating-notes';
          note.textContent = notes[Math.floor(Math.random() * notes.length)];
          note.style.left = Math.random() * window.innerWidth + 'px';
          note.style.top = window.innerHeight + 'px';
          note.style.animationDelay = Math.random() * 2 + 's';
          
          document.body.appendChild(note);
          
          setTimeout(() => {
            if (note.parentNode) {
              note.parentNode.removeChild(note);
            }
          }, 4000);
        }, 800);
      }
      
      function toggleVolumeControl() {
        showingVolumeControl = !showingVolumeControl;
        if (showingVolumeControl) {
          volumeControl.classList.add('show');
        } else {
          volumeControl.classList.remove('show');
        }
      }
      
      musicControl.addEventListener('click', toggleMusic);
      musicControl.addEventListener('contextmenu', (e) => {
        e.preventDefault();
        toggleVolumeControl();
      });
      
      volumeSlider.addEventListener('input', (e) => {
        const volume = e.target.value;
        bgMusic.volume = volume;
        if (gainNode) {
          gainNode.gain.value = 0.1 * volume;
        }
      });
      
      // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„Å´Èü≥Ê•Ω„ÇíËá™ÂãïÈñãÂßãÔºà„É¶„Éº„Ç∂„Éº„Ç§„É≥„Çø„É©„ÇØ„Ç∑„Éß„É≥ÂæåÔºâ
      document.addEventListener('click', function autoStart() {
        if (!isPlaying) {
          toggleMusic();
        }
        document.removeEventListener('click', autoStart);
      }, { once: true });

      render();
      const timer = setInterval(render, 1000);
    </script>
  </body>
</html>
